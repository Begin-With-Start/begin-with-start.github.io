{"data":{"children":[{"children":[{"src":"AlipaySDK.bundle/amc.i18n","tag":"meta","type":"i18n"},{"rel":"stylesheet","tag":"link","href":"AlipaySDK.bundle/amc.css"},{"src":"AlipaySDK.bundle/amc.js","tag":"script"},{"children":[{"tag":"text","text":"amc.fn.spmPageCreate(\"a283.b4038\");var rpc=amc.rpcData;var getTag=amc.fn.getById;var hide=amc.fn.hide;var show=amc.fn.show;var loadingBlueGif=amc.path+\"alipay_msp_loading_blue.gif\";var successBlueNorepeatGif=amc.path+\"alipay_msp_success_blue.gif\";var rpcVIData=rpc.VIData;var successTxt=rpc.successText||\"{{pay_ok}}\";var payingText=rpc.doingText||\"{{paying}}\";var btnText=rpc.btnText||\"{{pay}}\";var PAY_SUCCESS_CODE=\"0001\";var PAY_FAILURE_CODE=\"0002\";var gifTag;var backAction=\"\";var VI_ACTION_START=\"viStart\";var VI_ACTION_PRE_START=\"viPreStart\";var VI_ACTION_RPC_RESPONSE=\"viRpcResponse\";var VI_ACTION_PAY_STATUS=\"payStatus\";var VI_ACTION_CLOSE_PAGE=\"viClosePage\";var VI_ACTION_FORGET_PWD_HANDLE_OTHER_PAY_WAY=\"viHandleOtherPayWay\";var VI_CHANNEL_MODE_FROM_TEMPLATE=\"1\";var logAction=amc.fn.logAction;var VI_LOG_ACTION_TYPE=\"VI\";var confirmAction=buildConfirmActionWithAct(rpc.confirmAct);var pwdType=null;var viPwdTip=null;var gForgetPwdWithOtherVIWay=false;function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function buildConfirmActionWithAct(b){var a={name:\"/pwd/validate\"};if(b&&b.name){a=b}a.viChannelMode=VI_CHANNEL_MODE_FROM_TEMPLATE;return a}function initNav(){var a=amc.res.close;if(rpc.backAction){backAction=rpc.backAction}else{if(rpc.bizType===\"deposit\"||rpc.payOrder){backAction=\"loc:back\";a=amc.res.arrowLeft}else{backAction=\"loc:exit\"}}var b=amc.fn.iNav(a,\"{{input_pwd}}\",null,null,onBack,null);getTag(\"body\").insertBefore(b,getTag(\"iLine\"));amc.fn.spmExposure(\"a283.b4038.c9698.d17397\")}function initUI(){initNav();if(amc.isIOS){var a={};try{a=getTag(\"viPlugin\").invoke(\"getAuthType\",{viData:rpcVIData})}catch(c){amc.fn.logError(\"VI\",\"getAuthType失败,\"+c)}var b=(a&&a.type)||\"pwd\";var d=b==\"pwd\"||b==\"spwd\";if(!d&&isIOSBioAuth(b)){amc.fn.showLoading(true,true)}toggleBodyVisibility(d)}startVIPlugin(rpcVIData);logAction(\"viLen|\"+(rpcVIData||\"\").length,VI_LOG_ACTION_TYPE);gifTag=getTag(\"pwdLoadGif\");getTag(\"loadTxt\").innerText=payingText;amc.fn.spmExposure(\"a283.b4038.c9698.d17395\")}function isIOSBioAuth(a){var b=a||pwdType;return b===\"fp\"||b===\"faceid\"||b===\"ZFACE\"}function isAndroidBioAuth(a){var b=a||pwdType;return b==\"fp\"||b==\"ZFACE\"||b==\"FACEID\"}function startVIPlugin(a){var b={action:VI_ACTION_START,data:a,callbacks:{onViAction:\"viCallback\"},config:{pwdInputBtn:btnText,pwdPlaceHolder:\"{{alipaypwd}}\",fpAlertMsg:\"{{confirm_exit}}\",fpAlertCancelBtn:\"{{confirm_btn}}\",fpAlertToPwdBtn:\"{{input_pwd_s}}\",pwdInputTip:rpc.pwdTip,loadingPayingText:payingText,loadingPaySuccessText:successTxt,shouldDismissAfterAuth:\"N\"}};sendDataToVIPlugin(b)}function sendDataToVIPlugin(a){getTag(\"viPlugin\").src=JSON.stringify(a);logAction((a&&a.action)||\"action\",VI_LOG_ACTION_TYPE)}function sendResponseDataToVI(a){var b={action:VI_ACTION_RPC_RESPONSE,data:a};sendDataToVIPlugin(b)}function showVILoadingWithPaymentResult(a){var b={action:VI_ACTION_PAY_STATUS,data:{status:a}};sendDataToVIPlugin(b)}function sendForgetPwdPayWithOtherWayToVI(){var a={action:VI_ACTION_FORGET_PWD_HANDLE_OTHER_PAY_WAY,data:{from:\"forgotPwd\"}};sendDataToVIPlugin(a)}function viCallback(c){var g={};try{g=JSON.parse(c)||{}}catch(f){amc.fn.logError(\"VI\",\"解析核身JSON失败\"+f);return}var b=g.action;var d=g.data;var a={viStart:processVIStart,viStatus:processVIStatus,viRpcRequest:processVIRpcRequest,viToPWD:processVIToPWD};if(b!=\"viStatus\"){logAction(b||\"actType\",VI_LOG_ACTION_TYPE)}amc.fn.isString(b)&&a[b]&&a[b](d)}function processVIStart(b){b=b||{};var a=b.otherPayWay;if(a){if(a.config===\"Y\"&&typeof a.content===\"string\"){getTag(\"forgetPwdText\").innerText=a.content;gForgetPwdWithOtherVIWay=true}else{gForgetPwdWithOtherVIWay=false}}}function processVIStatus(b){if(!b){return}var a=b.status;logAction((b.type||\"type\")+\"-\"+(a||\"status\"),VI_LOG_ACTION_TYPE);if(a===\"start\"){pwdType=b.type;if(pwdType===\"pwd\"||pwdType===\"spwd\"){viPwdTip=b.tip;toggleBodyVisibility(true);showPwdInputAndTips();if(pwdType==\"spwd\"&&amc.isPlus){getTag(\"viPlugin\").className=\"vi-pwd-plus\"}}else{toggleBodyVisibility(false)}}else{if(a===\"abort\"){amc.fn.exit()}else{if(a===\"awaitUser\"){if(pwdType===\"pwd\"||pwdType===\"spwd\"){showPwdInputAndTips()}if(isIOSBioAuth()&&amc.isIOS){stopIOSLoading()}}else{if(a==\"findPwd\"&&amc.isIOS){amc.fn.setResult({ResultStatus:\"6006\"})}}}}}function stopIOSLoading(){amc.fn.showLoading(false,false)}function processVIRpcRequest(a){if(pwdType==\"pwd\"||pwdType==\"spwd\"){beforeSendPwdPay();submitPay(a,onReceivePwdPay)}else{beforeSendBioPay();submitPay(a,onReceiveBioPay)}}function processVIToPWD(a){a=a||{};if(isIOSBioAuth()&&amc.isIOS){stopIOSLoading()}startVIPlugin(a)}function submitPay(a,b){if(amc.isAndroid&&isAndroidBioAuth()){confirmAction.loadtxt=undefined}else{if(rpc.payRetrieveOnce==\"true\"&&amc.isIOS&&isIOSBioAuth()){stopIOSLoading();confirmAction.loadtxt=undefined}else{if(amc.isIOS&&pwdType===\"ZFACE\"){confirmAction.loadtxt=undefined}else{confirmAction.loadtxt=\"\"}}}obj={action:confirmAction};obj.action[\"params\"]=mergeObjcts(obj.action[\"params\"],{VIData:a},rpc.params);if(rpc.biztype!=\"openservice\"&&(confirmAction.name==\"/pwd/validate\"||confirmAction.name==\"/cashier/pay\"||confirmAction.name==\"/cashier/payment\")){obj.action[\"neec\"]=\"6004\"}document.asyncSubmit(obj,function(d){d=d||{};if(d.confirmAct&&d.confirmAct.name){confirmAction=buildConfirmActionWithAct(d.confirmAct)}b&&b(d);if(d.VIData){try{var c=JSON.parse(d.VIData).finishCode;logAction(\"viCode|\"+c,VI_LOG_ACTION_TYPE)}catch(e){}sendResponseDataToVI(d.VIData)}})}function beforeSendBioPay(){showVILoadingWithPaymentResult(\"paying\")}function beforeSendPwdPay(){hide(\"tips\");hide(\"pwdBox\");show(\"pwdLoad\");gifTag.src=loadingBlueGif}function onReceivePwdPay(a){a=a||{};if(a.pageloading===\"0\"&&gifTag.src===loadingBlueGif){hide(\"pwdLoad\")}else{if(a.pageloading===\"1\"){show(\"pwdLoad\")}}if(a.status===PAY_SUCCESS_CODE){showSuccessAnimation(a.successText)}else{if(a.status===PAY_FAILURE_CODE){onPaymentFail()}}}function onReceiveBioPay(a){a=a||{};if(a.status===PAY_SUCCESS_CODE){showVILoadingWithPaymentResult(\"success\")}else{if(a.status===PAY_FAILURE_CODE){showVILoadingWithPaymentResult(\"fail\")}}}function toggleBodyVisibility(a){if(a){getTag(\"body\").style.opacity=\"0.96\"}else{getTag(\"body\").style.opacity=\"0\"}}function mergeObjcts(){var a={};if(arguments&&arguments.length){for(var c=0;c<arguments.length;c++){var d=arguments[c];if(!amc.fn.isObject(d)){continue}for(var b in d){a[b]=d[b]}}}return a}function showSuccessAnimation(a){getTag(\"loadTxt\").innerText=a||successTxt;gifTag.src=successBlueNorepeatGif;show(\"pwdLoad\")}function onPaymentFail(){showPwdInputAndTips()}function showPwdInputAndTips(){var a=viPwdTip||rpc.pwdTip;if(a){viPwdTip=null;rpc.pwdTip=null;getTag(\"tips\").innerText=a;show(\"tips\")}else{hide(\"tips\")}gifTag.src=\"\";hide(\"pwdLoad\");show(\"pwdBox\")}function onBack(){amc.fn.spmClick(\"a283.b4038.c9698.d17397\");amc.fn.spmPageDestroy(\"a283.b4038\");document.submit({action:{name:backAction}})}function forgetPwd(){amc.fn.spmClick(\"a283.b4038.c9698.d17395\");if(gForgetPwdWithOtherVIWay){amc.fn.postNotification(\"kMQPFindPwdNotification\");sendForgetPwdPayWithOtherWayToVI()}else{var b=\"\";if(rpc.logon_id){b=\"&loginId=\"+rpc.logon_id}var a=\"alipays://platformapi/startApp?appId=20000013&pwdType=phonePassword\"+b+\"&bizScene=mobilecashier_sdk_pay\";amc.fn.postNotification(\"kMQPFindPwdNotification\");document.submit({action:{name:\"loc:openurl('\"+a+\"','0')\"}})}}function onDestroy(){viPageCloseNotify()}function viPageCloseNotify(){var a={action:VI_ACTION_CLOSE_PAGE};sendDataToVIPluginPlugin(a)}function onKeyDown(){if(event.which==4){onBack()}};"}],"tag":"script"},{"children":[{"tag":"text","text":".stretch-self {\n            align-self: stretch;\n        }\n\n        .pd-lr {\n            padding-left: 16px;\n            padding-right: 16px;\n        }\n        \n        .pd-t {\n            padding-top: 12px;\n        }\n        \n        .pd-t-l {\n            padding-top: 20px;\n        }\n\n        .font-m {\n            font-size: 15px;\n        }\n        \n        .font-l-white {\n            font-size: 17px;\n            color: #000;\n        }\n        \n        .amc-i-nav-m-box {\n            align-items: center;\n            justify-content: center;\n            flex: 3.0;\n        }\n        \n        .vi-pwd-box {\n            margin-top: 12px;\n        }\n        \n        .vi-pwd {\n            flex: 1.0;\n            height: 47px;\n            max-height: 47px;\n        }\n        \n        .vi-pwd-plus {\n            flex: 1.0;\n            height: 61px;\n            max-height: 61px;\n        }\n\n        .pwd-tips {\n            color: #F4333C;\n            font-size: 13px;\n        }\n\n        .forget-pwd-box {\n            margin-top: 16px;\n        }"}],"tag":"style"}],"tag":"head"},{"css":"amc-i-body","children":[{"css":"amc-1px-title-line","tag":"div","id":"iLine"},{"css":"amc-v-box amc-flex-1","children":[{},{"css":"amc-flex-center pd-lr pd-t","children":[{"css":"amc-flex-1 pwd-tips amc-text-center amc-ellipsis-2-line","tag":"label","id":"tips"}],"tag":"div","id":"tipsBox"},{"css":"pd-lr amc-v-box","children":[{},{"css":"vi-pwd-box","children":[{"css":"vi-pwd","tag":"embed","id":"viPlugin","type":"VIPayPluginView"}],"tag":"div","id":"viPwdBox"},{},{"css":"forget-pwd-box amc-flex-1 amc-flex-center","children":[{"css":"amc-text-center amc-theme-color amc-flex-1 amc-ellipsis-2-line font-m","children":[{"tag":"text","text":"{{forget_pwd}}"}],"onclick":"forgetPwd()","tag":"label","id":"forgetPwdText"}],"tag":"div"}],"tag":"div","id":"pwdBox"},{},{"css":"amc-loading-box","children":[{"css":"amc-flex-space-1","tag":"div"},{"css":"amc-load-img","tag":"embed","id":"pwdLoadGif","type":"MQPPayGifView"},{"css":"pd-t-l stretch-self pd-lr","children":[{"css":"font-l-white amc-flex-1 amc-text-center amc-ellipsis-2-line","children":[{"tag":"text","text":"{{paying}}"}],"tag":"label","id":"loadTxt"}],"tag":"div"},{"css":"amc-flex-space-2","tag":"div"}],"tag":"div","id":"pwdLoad"}],"tag":"div","id":"mainBody"}],"tag":"body","id":"body","onkeydown":"onKeyDown()","onload":"init()"}],"tag":"html"},"publishVersion":"150924","name":"cashier-pwd-check-flex","format":"JSON","tag":"QUICKPAY","time":"0115","tplId":"QUICKPAY@cashier-pwd-check-flex","tplVersion":"5.3.7"}