{"data":{"children":[{"children":[{"src":"AlipaySDK.bundle/amc.i18n","tag":"meta","type":"i18n"},{"rel":"stylesheet","tag":"link","href":"AlipaySDK.bundle/amc.css"},{"src":"AlipaySDK.bundle/amc.js","tag":"script"},{"children":[{"tag":"text","text":"body,button,input,select,textarea {\n            font-family: \"PingFangSC-Regular\", \"Helvetica Neue\",Helvetica, STHeiTi ,sans-serif;\n            font-size: 14px;\n            color: #333333;\n        }\n\n        body {\n            background-color: #f5f5f5;\n        }\n\n        #mainBody {\n            overflow: scroll;\n        }\n\n        .de-1px-line {\n            height: 1px;\n            background-color: #eeeeee;\n        }\n\n        .no-top-padding {\n            padding-top: 0;\n        }\n        .cell-box {\n            padding: 10px 15px;\n            min-height: 60px;\n        }\n        .flex-row {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n\n        .algin-item-start {\n            align-items: flex-start;\n        }\n\n        .flex-between {\n            justify-content: space-between;\n        }\n\n        .flex-justify-start {\n            justify-content: flex-start;\n        }\n\n        .merchant-detail-img-wrapper {\n            min-height: 300px;\n        }\n\n        .merchant-detail-img {\n            width: 100%;\n        }\n\n        .de-agreement-list {\n            display: flex;\n            align-items: flex-start;\n            padding: 0 15px;\n            margin-top: 26px;\n        }\n\n        .de-agreement-checkbox {\n            width: 22px;\n            align-items: flex-start;\n        }\n        .de-agreement-links {\n            margin-left: 6px;\n            padding-left: 6px;\n            margin-top: -1px;\n            font-size: 14px;\n            flex: 1;\n            line-height: 21px;\n            word-break: break-all;\n            word-wrap: break-word;\n            flex-wrap: wrap;\n        }\n\n        .link-text {\n            font-size: 15px;\n            color: #108ee9;\n        }\n\n        .btn-actions-wrapper {\n            display: flex;\n            flex-direction: column;\n            margin-top: 5px;\n        }\n\n        .btn-wrapper {\n            background-color: #fff;\n            color: #9f9f9f;\n            margin: 5px 15px 10px;\n            border: 0;\n            border-radius: 5px;\n            font-size:18px;\n            height: 42px;\n            max-height: 42px;\n            min-height: 42px;\n            flex: 1.0;\n        }\n\n        .btn {\n            flex: 1.0;\n        }\n\n\n        .amc-btn-default-reset {\n            font-size: 18px;\n        }\n\n        .disabled-btn {\n            background-color:#ebebf0;\n            color:#d2d2d2;\n        }\n\n        .disabled-btn-primary {\n            background-color:#ebebf0;\n            color:#d2d2d2;\n        }\n\n        .de-toast {\n            position: absolute;\n            top: 300px;\n            left: 70px;\n            right: 70px;\n            height: auto;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n\n        .de-toast-label {\n            flex: 1;\n            text-align: center;\n            color: #fff;\n            padding: 5px 15px;\n            border-radius: 4px;\n            opacity: 0.7;\n            background-color: #333;\n        }\n\n        .checkbox-ios {\n            width: 20px;\n            height: 20px;\n            background-image: url(AlipaySDK.bundle/alipay_msp_check);\n            background-size: 15px 15px;\n            background-position: center;\n            margin: 0;\n        }\n\n        .checkbox-ios:checked {\n            background-image: url(AlipaySDK.bundle/alipay_msp_checked);\n        }\n\n        .checkbox-ios:disabled {\n            background-image: url(AlipaySDK.bundle/alipay_msp_check_disable);\n        }\n\n        .checkbox-android {\n            width: 20px;\n            height: 20px;\n            background-image: url(com.alipay.android.app/alipay_msp_check);\n            background-size: 15px 15px;\n            background-position: center;\n            margin: 0;\n        }\n\n        .checkbox-android:checked {\n            background-image: url(com.alipay.android.app/alipay_msp_checked);\n        }\n\n        .checkbox-android:disabled {\n            background-image: url(com.alipay.android.app/alipay_msp_check_disable);\n        }"}],"tag":"style"},{"children":[{"tag":"text","text":"amc.fn.spmPageCreate(\"a259.b13452\");var logError=function(a,c){try{console.info(\"==> start error log \"+a);amc.fn.logError(a,c)}catch(b){amc.fn.logError(\"log_error_failed\",\"\")}};if(amc.isFlybird){console={};console.log=print;console.info=print;console.error=logError}var rpcData=amc.rpcData;var spmParams={auth_type:rpcData.signScene||\"\"};var getTag=amc.fn.getById;var exit=amc.fn.exit;var show=amc.fn.show;var hide=amc.fn.hide;var create=amc.fn.create;var toastTimeoutRef=null;var isSubmitting=false;var firstBtnWrapperId=\"first-btn-wrapper\";var firstBtnId=\"first-btn\";var secondBtnWrapperId=\"second-btn-wrapper\";var secondBtnId=\"second-btn\";var pageData={initPageToken:rpcData.initPageToken,productCode:rpcData.productCode,signScene:rpcData.signScene,extInfo:rpcData.extInfo||{},};var agreeCheckboxId=\"de-agree-checkbox\";var MAX_PAY_QUOTA=99999999;function toast(c,a,b){if(!c){return}if(amc.isAndroid){if(b&&gToastDisabled){return}else{setTimeout(function(){gToastDisabled=false},2000);gToastDisabled=true}}document.toast({text:c,type:a||\"none\"},function(){})}function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){console.error(a);console.error(\"catch\",\"进入了异常流程\");if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var b=rpcData;var c=amc.fn.getNav(amc.res.navBack,\"{{return}}\",b.pageTitle,null,null,onBack,null);getTag(\"body\").insertBefore(c,getTag(\"mainBody\"));getTag(\"mainBody\").style.height=amc.specs.bodyHeight;var a=getTag(\"mainBody\");renderDeductMerchant(b);renderAgreementInfo(b.deductAgreementDetailInfos);renderActionBtn(b);show(a);console.log(\"==> render done\")}function postRPC(b,c,d,e){if(!b){return}var a={operationType:b,requestData:c};setTimeout(function(){document.invoke(\"rpc\",a||{},function(f){f=f||{};if(isRpcSuccess(f)){d&&d(f)}else{logError(b,f);commonErrorForPostRPC(f);e&&e(f)}})},10)}function commonErrorForPostRPC(a){a=a||{};if(a.errorMsg){}else{if(a.error==\"10\"||a.error==\"11\"){toast(\"网络不给力\",\"fail\")}else{if(a.error){toast(\"网络开小差，请稍后重试\")}}}}function isRpcSuccess(a){return a&&(a.success||a.resultCode===\"SUCCESS\"||a.resultCode===\"success\")}function showToast(b){var c=getTag(\"de-toast\");var a=getTag(\"de-toast-label\");a.innerText=b;if(toastTimeoutRef){clearTimeout(toastTimeoutRef)}show(c);toastTimeoutRef=setTimeout(function(){hide(c);a.innerText=\"\"},3000)}function gotoLink(a,b){document.submit({action:{name:\"loc:openweb('\"+a+\"','\"+b+\"')\"}})}function doAction(b,d){if(!isSubmitting){isSubmitting=true}else{return}var h=b.action;var c=b.actionParamNames||\"\";var j=b.buttonParams||\"\";var g={};var n=d||{};n.initPageToken=rpcData.initPageToken;if(j){var m=j.split(\",\");for(var e=0;e<m.length;e++){var l=m[e];if(!l){continue}var k=l.split(\":\");if(k[0]&&k[1]){n[k[0]]=k[1]}}}if(c){var a=c.split(\",\");for(var e=0;e<a.length;e++){var f=a[e];n[f]=pageData.extInfo[f]}}g.action={};g.action[\"loadtxt\"]=\"\";g.action[\"name\"]=h;g.action[\"params\"]=n;g.param=n;document.asyncSubmit(g,function(i){if(i&&i.pageloading===\"0\"){isSubmitting=false}else{isSubmitting=true}})}function renderDeductMerchant(a){var b=getTag(\"merchant-detail-img\");b.src=a.pageBackground}function renderAgreementInfo(b){var a=getTag(\"de-agreement-links\");var j=getTag(\"de-agreement-confirm-checkbox\");var h=getTag(agreeCheckboxId);var d=\"\";if(!b||b.length<1){j.innerText=\"\";return}if(amc.isAndroid){h.className=h.className+\" checkbox-android\"}else{h.className=h.className+\" checkbox-ios\"}var g=function(k){var m=\"支付宝\";for(var l=0;l<b.length;l++){var n=b[l];if(n.agreementUrl===k){agreementName=n.agreementName;break}}gotoLink(k,agreementName);amc.fn.spmClick(\"a259.b13452.c32494.d64284\",spmParams)};show(j);if(amc.isAndroid){d+='<font color=\"#8b8b8b\" >我已阅读并同意</font>'}else{d+='<a color=\"#8b8b8b\" href=\"toggle_check\" >我已阅读并同意</a>'}for(var c=0;c<b.length;c++){var f=b[c];var e=\"\";if(c>0){e+='<font color=\"#8b8b8b\">、</font>'}e+='<a color=\"#108ee9\" href=\"'+f.agreementUrl+'\">'+f.agreementName+\"</a>\";d+=e}getTag(\"de-agreement-links\").innerText=d;getTag(\"de-agreement-links\").onlink=function(i){console.log(i);if(!i){return}if(i===\"toggle_check\"){toggleAgreeCheckbox();return}g(i)}}function renderActionBtn(c){var a=getTag(\"btn-actions-wrapper\");var b=c.buttons;if(b&&b[0]){renderFirstBtn(b[0],c,a)}if(b&&b[1]){renderSecondBtn(b[1],a)}}function renderFirstBtn(g,b,a){var h=create(\"div\",\"btn-wrapper amc-align-center amc-justify-center amc-btn-primary disabled-btn-primary \",a);h.id=firstBtnWrapperId;var c=create(\"img\",\"amc-loading-img amc-text-white-clolor amc-hidden\",h);c.id=\"loading1\";c.src=\"indicatior\";if(amc.isAndroid){c.src=amc.path+\"alipay_msp_indicator_white_loading\"}var e=create(\"button\",\"btn amc-btn-primary disabled-btn-primary\",h);e.id=firstBtnId;e.innerText=g.text;e.onclick=function(){amc.fn.spmClick(\"a259.b13452.c32494.d64286\",spmParams);var i=getTag(agreeCheckboxId);if(i&&!i.checked){showToast(\"请先阅读并同意协议\");return}if(!d()){f()}};function d(){if(b.dialogContent){amc.fn.spmExposure(\"a259.b13452.c32618\",spmParams);document.confirm({title:\"\",message:b.dialogContent,cancelButton:b.dialogCancelText,okButton:b.dialogConfirmText},function(i){var j={};var k=\"\";if(i.ok){k=b.dialogConfirmParamValue;amc.fn.spmClick(\"a259.b13452.c32618.d64598\",spmParams)}else{k=b.dialogCancelParamValue;amc.fn.spmClick(\"a259.b13452.c32618.d64599\",spmParams)}j[b.dialogParamName]=k;f(j)});return true}return false}function f(i){if(typeof i!==\"object\"){i={}}disableSubmitBtn(firstBtnId,\"loading1\");doAction(g,i)}}function renderSecondBtn(d,a){var f=\" disabled-btn\";if(d.noNeedAgreements){f=\" no-disabled-btn\"}var c=create(\"div\",\"btn-wrapper amc-align-center amc-justify-center amc-btn-secondary \"+f,a);c.id=secondBtnWrapperId;var b=create(\"img\",\"amc-loading-img amc-text-white-clolor amc-hidden \",c);b.id=\"loading2\";b.src=\"indicatior\";if(amc.isAndroid){b.src=amc.path+\"alipay_msp_indicator_white_loading\"}var e=create(\"button\",\"btn amc-btn-secondary amc-btn-default-reset \"+f,c);e.id=secondBtnId;e.innerText=d.text;e.onclick=function(){amc.fn.spmClick(\"a259.b13452.c32494.d64287\",spmParams);var g=getTag(agreeCheckboxId);if(!d.noNeedAgreements&&g&&!g.checked){showToast(\"请先阅读并同意协议\");return}disableSubmitBtn(secondBtnId,\"loading2\");doAction(d,{})}}function updateBtnStatus(){amc.fn.spmClick(\"a259.b13452.c32494.d64285\",spmParams);var a=getTag(agreeCheckboxId);if(!a.checked){addDisableBtnClass()}else{removeDisableBtnClass()}}function toggleAgreeCheckbox(){var a=getTag(agreeCheckboxId);a.checked=!a.checked;updateBtnStatus()}function addDisableBtnClass(a){var e=getTag(firstBtnWrapperId);var c=getTag(firstBtnId);var b=getTag(secondBtnWrapperId);var d=getTag(secondBtnId);if(e&&c&&(a||e.className.indexOf(\"no-disabled-btn\")<0)){e.className=e.className+\" disabled-btn-primary\";c.className=c.className+\" disabled-btn-primary\"}if(b&&d&&(a||b.className.indexOf(\"no-disabled-btn\")<0)){b.className=b.className+\" disabled-btn\";d.className=d.className+\" disabled-btn\"}}function removeDisableBtnClass(){var d=getTag(firstBtnWrapperId);var b=getTag(firstBtnId);var a=getTag(secondBtnWrapperId);var c=getTag(secondBtnId);if(d&&b){d.className=d.className.replace(/ disabled-btn-primary/g,\"\");b.className=b.className.replace(/ disabled-btn-primary/g,\"\")}if(a&&c){a.className=a.className.replace(/ disabled-btn/g,\"\");c.className=c.className.replace(/ disabled-btn/g,\"\")}}function errorToast(a){showToast(a||\"\");enableSubmitBtn()}function errorCallback(a){console.log(\"签约失败\");document.invoke(\"setResult\",a,function(b){console.log(\"setResult失败\")});exit()}function successCallback(a){console.log(\"签约成功\");document.invoke(\"setResult\",a,function(b){console.log(\"setResult成功\")});exit()}function applySign(){}function disableSubmitBtn(b,a){addDisableBtnClass(true);amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},b,a)}function enableSubmitBtn(b,a){removeDisableBtnClass();if(!b){return}amc.fn.shouldShowBtnIndicator({pageloading:\"0\"},b,a)}function onBack(){amc.fn.spmClick(\"a259.b13452.c32476.d64254\",spmParams);var a={title:\"\",message:\"{{confirm_exit}}\",okButton:\"{{confirm_btn}}\",cancelButton:\"{{cancel}}\"};amc.fn.spmExposure(\"a259.b13452.c32628\",spmParams);document.confirm(a,function(b){if(b.ok){amc.fn.spmClick(\"a259.b13452.c32628.d64616\",spmParams);amc.fn.spmPageDestroy(\"a283.b4033\");errorCallback({cancel:true})}else{amc.fn.spmClick(\"a259.b13452.c32628.d64617\",spmParams)}})}function onKeyDown(){if(event.which==4){onBack()}};"}],"tag":"script"}],"tag":"head"},{"css":"amc-body","children":[{},{"css":"amc-main amc-hidden no-top-padding","children":[{"css":"amc-main amc-margin-b-s no-top-padding","children":[{"css":"amc-v-box amc-bg-white merchant-detail-img-wrapper","children":[{"css":"merchant-detail-img","tag":"img","id":"merchant-detail-img"}],"tag":"div"},{"css":"de-1px-line","tag":"div"},{"css":"de-agreement-list","children":[{"css":"de-agreement-checkbox amc-hidden","children":[{"css":"","onchange":"updateBtnStatus()","tag":"input","id":"de-agree-checkbox","type":"checkbox"}],"tag":"div","id":"de-agreement-confirm-checkbox"},{"css":"de-agreement-links","tag":"label","id":"de-agreement-links"}],"tag":"div","id":"de-agreement-list"},{},{"css":"btn-actions-wrapper","tag":"div","id":"btn-actions-wrapper"}],"tag":"div"}],"tag":"div","id":"mainBody"},{"css":"de-toast amc-hidden","children":[{"css":"de-toast-label","tag":"label","id":"de-toast-label"}],"tag":"div","id":"de-toast"}],"tag":"body","id":"body","onkeydown":"onKeyDown();","onload":"init();"}],"tag":"html"},"publishVersion":"150924","name":"mdeduct-zhima-precredit-flex","format":"JSON","tag":"QUICKPAY","time":"0022","tplId":"QUICKPAY@mdeduct-zhima-precredit-flex","tplVersion":"5.2.5"}