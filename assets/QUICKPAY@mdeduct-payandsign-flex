{"data":{"children":[{"children":[{"src":"AlipaySDK.bundle/amc.i18n","tag":"meta","type":"i18n"},{"rel":"stylesheet","tag":"link","href":"AlipaySDK.bundle/amc.css"},{"src":"AlipaySDK.bundle/amc.js","tag":"script"},{"children":[{"tag":"text","text":"body,button,input,select,textarea {\n            font-family: \"PingFangSC-Regular\", \"Helvetica Neue\",Helvetica, STHeiTi ,sans-serif;\n            font-size: 14px;\n            color: #333333;\n        }\n\n        body {\n            background-color: #f5f5f5;\n        }\n\n        #mainBody {\n            overflow: scroll;;\n        }\n\n        .de-1px-line {\n            height: 1px;\n            background-color: #eeeeee;\n        }\n\n        .main-body {\n            padding-top: 0;\n        }\n        .cell-box {\n            padding: 10px 15px;\n            min-height: 60px;\n        }\n        .flex-row {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n\n        .algin-item-start {\n            align-items: flex-start;\n        }\n\n        .flex-between {\n            justify-content: space-between;\n        }\n\n        .flex-justify-start {\n            justify-content: flex-start;\n        }\n\n        .am-message {\n            width: 100%;\n            position: relative;\n            color: #000;\n            overflow: hidden;\n            padding: 25px 15px;\n            background-color: #fff;\n            text-align: center;\n            display: flex;\n            align-items: center;\n        }\n        .am-ft-price {\n            font-size: 45px;\n            font-family: AlipayNumber;\n            font-weight: 400;\n        }\n        .am-ft-unit {\n            margin-bottom: -14px;\n            font-size: 27px;\n            font-family: AlipayNumber;\n            font-weight: 600;\n        }\n        .am-message-main {\n            margin: 12px auto 9px;\n        }\n        .subject {\n            width: 90%;\n            margin: 0 32px;\n            text-align: center;\n            font-size: 18px;\n            font-weight: 700;\n            color: #333;\n        }\n        .am-message-sub {\n            margin-top: 0px;\n        }\n        .merchantName {\n            width: 90%;\n            margin: 0 32px;\n            text-align: center;\n            line-height: 19px;\n            font-size: 15px;\n            color: #999999;\n        }\n\n        .checkbox-ios {\n            width: 15px;\n            height: 15px;\n            background-image: url(AlipaySDK.bundle/alipay_msp_check);\n            background-size: 15px 15px;\n        }\n\n        .checkbox-ios:checked {\n            background-image: url(AlipaySDK.bundle/alipay_msp_checked);\n        }\n\n        .checkbox-ios:disabled {\n            background-image: url(AlipaySDK.bundle/alipay_msp_check_disable);\n        }\n\n        .checkbox-android {\n            width: 15px;\n            height: 15px;\n            background-image: url(com.alipay.android.app/alipay_msp_check);\n            background-size: 17px 17px;\n        }\n\n        .checkbox-android:checked {\n            background-image: url(com.alipay.android.app/alipay_msp_checked);\n        }\n\n        .checkbox-android:disabled {\n            background-image: url(com.alipay.android.app/alipay_msp_check_disable);\n        }\n\n        .amc-item-m-box {\n            flex: 1.0;\n            display: flex;\n            overflow: hidden;\n            align-items: center;\n        }\n        .amc-item-m-text {\n            overflow: hidden;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            flex:1.0;\n            font-size: 16px;\n            color: #666;\n        }\n        .amc-item-r-box {\n            flex: 1.0;\n            overflow: hidden;\n            justify-content: flex-end;\n            align-items: center;\n        }\n\n        .merchant-info-wrapper {\n            padding: 4px 0 4px 16px;\n        }\n        .merchant-product-name {\n            padding-right: 16px;\n            flex: 7;\n        }\n        .product-name {\n            flex: 1;\n            font-size: 15px;\n            width: 68%;\n        }\n        .merchant-product-desc {\n            -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n            width: 95%;\n            padding: 8px;\n            line-height: 22px;\n        }\n\n        .deduct-label-item {\n            padding: 4px 0;\n        }\n\n        .deduct-label-list {\n            padding: 12px 16px;\n        }\n\n        .deduct-label {\n            flex: 1.0;\n            color: #999999;\n        }\n        .deduct-label-content {\n            flex: 2.0;\n            text-align: right;\n        }\n\n        .deduct-switch {\n            min-height: 44px;\n            width: 85px;\n            justify-content: flex-end;\n        }\n\n        .de-agreement-list {\n            display: flex;\n            align-items: flex-start;\n            padding: 16px 16px 0;\n        }\n\n        .de-agreement-checkbox {\n            width: 20px;\n            margin-right: 6px;\n            align-items: flex-start;\n        }\n        .de-agreement-links {\n            margin-left: 0;\n            margin-top: -5px;\n            font-size: 15px;\n            flex: 1;\n            line-height: 21px;\n            word-break: break-all;\n            word-wrap: break-word;\n            flex-wrap: wrap;\n        }\n\n        .link-text {\n            font-size: 14px;\n            color: #108ee9;\n        }\n\n        .btn-primary-wrapper {\n            margin: 0 15px;\n            background-color:#108ee9;\n            border: 0;\n            border-radius: 2px;\n            color:#fff;\n            font-size:18px;\n            height: 42px;\n            max-height: 42px;\n            min-height: 42px;\n            flex: 1.0;\n        }\n\n        .btn-primary {\n            background-color:#108ee9;\n            border: 0;\n            border-radius: 5px;\n            color:#fff;\n            font-size:18px;\n            height: 42px;\n            max-height: 42px;\n            min-height: 42px;\n            flex: 1.0;\n        }\n\n        .de-toast {\n            position: absolute;\n            top: 300px;\n            left: 70px;\n            right: 70px;\n            height: auto;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n\n        .de-toast-label {\n            flex: 1;\n            text-align: center;\n            color: #fff;\n            padding: 5px 15px;\n            border-radius: 4px;\n            opacity: 0.7;\n            background-color: #333;\n        }\n\n        .de-info-dialog-item {\n            padding: 5px 15px;\n            display: flex;\n            justify-content: flex-start;\n            align-items: flex-start;\n        }\n\n        .de-dialog-prefix {\n            flex: 1;\n            line-height: 1;\n            align-self: flex-start;\n        }\n\n        .de-dialog-content {\n            flex: 10;\n            word-break: break-all;\n            word-wrap: break-word;\n        }\n\n        .dlg-btn {\n            text-align: center;\n            padding:15px;\n            border: 1px solid #e5e5e5;\n            width: 100%;\n            color: #108ee9;\n        }\n\n        .dlg-btn-text {\n            color: #108ee9;\n            text-align: center;\n        }\n\n        .de-dialog-prefix-logo {\n            height: 6px;\n            width: 6px;\n            border-radius: 3px;\n            background-color: #333;\n            align-self: flex-start;\n            margin-right: 5px;\n            margin-top: 5px;\n        }"}],"tag":"style"},{"children":[{"tag":"text","text":"amc.fn.spmPageCreate(\"a259.b13453\");if(amc.isFlybird){console={};console.log=print;console.info=print}var rpcData=amc.rpcData;var getTag=amc.fn.getById;var exit=amc.fn.exit;var show=amc.fn.show;var hide=amc.fn.hide;var create=amc.fn.create;var toastTimeoutRef=null;var agreeCheckboxId=\"de-agree-checkbox\";var deductSwitchId=\"deduct-switch\";var deInfoDialogId=\"de-info-dialog\";var MAX_PAY_QUOTA=99999999;var isShowDeductSwitch=rpcData.allowUserChooseSign;var isOnDeductSwitch=rpcData.needDeductSign;var isCheckedDeductAgreement=rpcData.defaultCheckAgreementSwitch?true:false;var deductProductCode=rpcData.personalProductCode;var deductAgreementCheckbox=getTag(\"de-agree-checkbox\");deductAgreementCheckbox.className=amc.isIOS?\"checkbox-ios\":\"checkbox-android\";function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var c=rpcData;var e=amc.fn.getNav(amc.res.navBack,\"{{return}}\",c.pageTitle,null,null,onBack,null);getTag(\"body\").insertBefore(e,getTag(\"mainBody\"));getTag(\"mainBody\").style.height=amc.specs.bodyHeight;if(amc.isAndroid){getTag(\"loading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}var b=getTag(\"mainBody\");renderOrderInfo(c);renderDeductLabelsDom(c.deductPageLabelInfos);renderDeductMerchant(c.merchantDetailInfo);renderAgreementInfo(c.deductAgreementDetailInfos);renderDialogInfo(c.merchantDetailInfo);if(isShowDeductSwitch){show(getTag(\"deductSwitchShow\"));hide(getTag(\"deductSwitchHide\"))}else{hide(getTag(\"deductSwitchShow\"));show(getTag(\"deductSwitchHide\"))}var d=getTag(deductSwitchId);d.value=isOnDeductSwitch?\"on\":\"off\";toggleDomDeductSwitch(isOnDeductSwitch);if(isShowDeductSwitch&&!isOnDeductSwitch){isCheckedDeductAgreement=true;hide(getTag(\"de-agreement-confirm-checkbox\"))}var a=getTag(agreeCheckboxId);a.checked=isCheckedDeductAgreement;show(b)}function showToast(b){console.log(\"print text\"+b);var c=getTag(\"de-toast\");var a=getTag(\"de-toast-label\");a.innerText=b;if(toastTimeoutRef){clearTimeout(toastTimeoutRef)}show(c);toastTimeoutRef=setTimeout(function(){hide(c);a.innerText=\"\"},3000)}function gotoLink(a,b){console.log(\"==> url is \"+a);document.submit({action:{name:\"loc:openweb('\"+a+\"','\"+b+\"')\"}})}function renderOrderInfo(b){var d=document.querySelector(\".J-order-amount\");var a=document.querySelector(\".J-subject\");var c=document.querySelector(\".J-merchant-name\");d.innerText=b.displayOrderAmount;a.innerText=b.subject;c.innerText=b.merchantDetailInfo.merchantName}function renderDeductMerchant(a){Array.prototype.slice.call(document.querySelectorAll(\".J-product-name\")).forEach(function(b){var c=\"\";if(isShowDeductSwitch){c=\"开通\"}b.innerText=c+a.merchantProductName});Array.prototype.slice.call(document.querySelectorAll(\".J-product-desc\")).forEach(function(b){b.innerText=a.serviceDescription||\"\"})}function renderDeductLabelsDom(b){if(!b||b.length<1){return}var c=getTag(\"deduct-label-list\");for(var a=0;a<b.length;a++){createSingleDeductLabel(b[a],c)}}function createSingleDeductLabel(e,c){if(!c){return}var a=create(\"div\",\"flex-row flex-between algin-item-start deduct-label-item\",c);var b=create(\"label\",\"deduct-label\",a);b.innerText=e.labelName||\"\";var d=create(\"label\",\"deduct-label-content\",a);d.innerText=e.labelValue||\"\"}function renderAgreementInfo(f){var c=\"\";if(!f||f.length<1){return}var b=function(g){var j=\"支付宝\";for(var h=0;h<f.length;h++){var k=f[h];if(k.agreementUrl===g){j=k.agreementName;break}}gotoLink(g,j)};c+='<a color=\"#999999\" href=\"toggle_check\">我已阅读并同意</a>';for(var d=0;d<f.length;d++){var e=f[d];var a='<a color=\"#108ee9\" class=\"link-text\" href=\"'+e.agreementUrl+'\">'+e.agreementName+\"</a>\";c+=a}getTag(\"de-agreement-links\").innerText=c;getTag(\"de-agreement-links\").onlink=function(g){if(!g&&getTag(\"de-agreement-confirm-checkbox\").style.display===\"none\"){return}if(g===\"toggle_check\"){toggleAgreeCheckbox();return}amc.fn.spmClick(\"a259.b13453.c32495.d64288\");b(g)}}function renderDialogInfo(a){var d=getTag(\"de-info-dialog-title\");var g=getTag(\"de-info-dialog-content\");if(!a){return}d.innerText=a.deductProdName;if(a.singlePayQuota<MAX_PAY_QUOTA&&a.singleDayQuota<MAX_PAY_QUOTA){var f=\"单笔扣款限额\"+a.singlePayQuota+\"元，每日累计限额\"+a.singleDayQuota+\"元\";createSingleDialogItem(f,g)}if(a.deductConfirmAmount){var b=\"单笔金额高于\"+a.deductConfirmAmount+\"元时，需要你短信确认才会扣款\";createSingleDialogItem(b,g)}if(a.deductSupportTools){var h=\"扣款渠道：\"+a.deductSupportTools;createSingleDialogItem(h,g)}var c=\"扣款顺序：请查看『支付宝』—『我的』—『设置』—『支付设置』—『扣款顺序』\";createSingleDialogItem(c,g);if(a.invalidTime){var e=\"有效期至: \"+a.invalidTime;createSingleDialogItem(e,g)}}function createSingleDialogItem(b,e){var d=create(\"div\",\"de-info-dialog-item\",e);var c=create(\"div\",\"de-dialog-prefix-logo\",d);var a=create(\"label\",\"de-dialog-content\",d);a.innerText=b}function showInfoDialog(){getTag(deInfoDialogId).showModal()}function hideInfoDialog(){getTag(deInfoDialogId).close()}function onDeductSwitch(a){amc.fn.spmClick(\"a259.b13453.c32495.d64620\");toggleDomDeductSwitch(a===\"on\")}function toggleDomDeductSwitch(f){var e=document.querySelector(\".J-product-desc\");var k=getTag(\"deduct-label-list\");var b=getTag(\"de-agreement-list\");var l=document.getElementsByClassName(\"deduct-label\");var a=document.getElementsByClassName(\"deduct-label-content\");var c=getTag(\"submit-btn\");var g=\"#999999\";var n=\"#333333\";var d=\"#999999\";var m=f?n:g;var p=f?n:g;var h=f?d:g;e.style.color=p;for(var j=0;j<l.length;j++){l[j].style.color=h}for(var j=0;j<a.length;j++){a[j].style.color=m}if(!f){hide(k);hide(b);c.innerText=\"确认付款\"}else{show(k);show(b);var o=deductProductCode===\"CYCLE_PAY_AUTH_P\"?\"自动续费\":\"免密支付\";c.innerText=isShowDeductSwitch?\"同意开通\"+o+\"并付款\":\"付款并开通\"+o}}function toggleAgreeCheckbox(){amc.fn.spmClick(\"a259.b13453.c32495.d64621\");var a=getTag(agreeCheckboxId);a.checked=!a.checked}function disableSubmitBtn(){amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"submit-btn\",\"loading\")}function enableSubmitBtn(){amc.fn.shouldShowBtnIndicator({pageloading:\"0\"},\"submit-btn\",\"loading\")}function submitInfo(){var d=getTag(deductSwitchId);var b=getTag(agreeCheckboxId);var a=d.value===\"on\";if(a&&b&&!b.checked){showToast(\"请先阅读并同意协议\");return}if(a&&rpcData.popWindowPrompt){amc.fn.spmExposure(\"a259.b13453.c32475\");document.confirm({message:rpcData.popWindowPrompt,okButton:\"确认开通\",cancelButton:\"取消\"},function(e){if(e.ok){amc.fn.spmClick(\"a259.b13453.c32475.d64251\");c()}else{amc.fn.spmClick(\"a259.b13453.c32475.d64252\")}})}else{c()}function c(){disableSubmitBtn();if(a){amc.fn.spmClick(\"a259.b13453.c32495.d64289\")}else{amc.fn.spmClick(\"a259.b13453.c32495.d64290\")}var f={};var e={needDeductSign:a};f.action={};f.action[\"loadtxt\"]=\"\";f.action[\"name\"]=rpcData.nextAction||\"/cashier/main\";f.action[\"params\"]=rpcData.params;f.param=e;document.asyncSubmit(f,function(g){})}}function onBack(){amc.fn.spmClick(\"a259.b13453.c32477.d64253\");var a={title:\"\",message:\"{{confirm_exit}}\",okButton:\"{{confirm_btn}}\",cancelButton:\"{{cancel}}\"};amc.fn.spmExposure(\"a259.b13453.c32627\");document.confirm(a,function(b){if(b.ok){document.submit({action:{name:\"loc:exit\"}});amc.fn.spmClick(\"a259.b13453.c32627.d64614\");amc.fn.spmPageDestroy(\"a259.b13453\")}else{amc.fn.spmClick(\"a259.b13453.c32627.d64615\")}})}function onKeyDown(){if(event.which==4){onBack()}};"}],"tag":"script"}],"tag":"head"},{"css":"amc-body","children":[{},{"css":"amc-main amc-hidden main-body","children":[{"css":"amc-v-box am-message","children":[{"css":"am-message-amount","children":[{"css":"am-ft-unit","children":[{"tag":"text","text":"￥"}],"tag":"label"},{"css":"am-ft-price J-order-amount","tag":"label"}],"tag":"div"},{"css":"am-message-main","children":[{"css":"subject J-subject","tag":"label"}],"tag":"div"},{"css":"am-message-sub","children":[{"css":"merchantName J-merchant-name","tag":"label"}],"tag":"div"}],"tag":"div"},{"css":"de-1px-line","tag":"div"},{"css":"amc-main amc-margin-b-s","children":[{"css":"de-1px-line","tag":"div"},{},{"css":"amc-v-box amc-bg-white merchant-info-wrapper","children":[{"css":"flex-row flex-between merchant-product-name","children":[{"css":"flex-row flex-justify-start","children":[{"css":"product-name J-product-name","tag":"label"}],"tag":"div"},{"css":"deduct-switch","children":[{"onchange":"onDeductSwitch","tag":"switch","id":"deduct-switch","value":"on"}],"tag":"div"}],"tag":"div"},{"css":"de-1px-line","tag":"div"},{"css":"merchant-product-desc J-product-desc","tag":"label"}],"tag":"div","id":"deductSwitchShow"},{},{"css":"amc-1px-line","tag":"div"},{"css":"amc-v-box amc-bg-white deduct-label-list","children":[{"css":"flex-row flex-between algin-item-start deduct-label-item","children":[{"css":"deduct-label","children":[{"tag":"text","text":"服务名称"}],"tag":"label"},{"css":"deduct-label-content J-product-name","tag":"label"}],"tag":"div"},{"css":"flex-row flex-between algin-item-start deduct-label-item","children":[{"css":"deduct-label","children":[{"tag":"text","text":"服务详情"}],"tag":"label"},{"css":"deduct-label-content J-product-desc","tag":"label"}],"tag":"div"}],"tag":"div","id":"deductSwitchHide"},{"css":"amc-1px-line","tag":"div"},{"css":"amc-v-box amc-bg-white deduct-label-list","tag":"div","id":"deduct-label-list"},{"css":"de-1px-line","tag":"div"},{"css":"de-agreement-list","children":[{"css":"de-agreement-checkbox","children":[{"css":"amc-checkbox amc-margin-r-xs","onclick":"toggleAgreeCheckbox();","tag":"input","id":"de-agree-checkbox","type":"checkbox"}],"tag":"div","id":"de-agreement-confirm-checkbox"},{"css":"de-agreement-links","tag":"label","id":"de-agreement-links"}],"tag":"div","id":"de-agreement-list"},{"css":"amc-abs-space-v-m","tag":"div"},{},{"css":"amc-align-center amc-justify-center","children":[{"css":"btn-primary-wrapper amc-align-center amc-justify-center","children":[{"css":"amc-loading-img amc-text-white-clolor amc-hidden","src":"indicatior","tag":"img","id":"loading"},{"css":"btn-primary","children":[{"tag":"text","text":"同意协议并支付"}],"onclick":"submitInfo();","tag":"button","id":"submit-btn"}],"tag":"div"}],"tag":"div"}],"tag":"div"}],"tag":"div","id":"mainBody"},{"css":"de-toast amc-hidden","children":[{"css":"de-toast-label","tag":"label","id":"de-toast-label"}],"tag":"div","id":"de-toast"},{"css":"amc-dlg-box amc-v-box","children":[{"css":"","children":[{"css":"amc-flex-1 amc-dlg-title","tag":"label","id":"de-info-dialog-title"}],"tag":"div"},{"css":"amc-v-box amc-dlg-width","tag":"div","id":"de-info-dialog-content"},{"css":"custom-line","tag":"div"},{"css":"amc-1px-line amc-flex-1","tag":"div"},{"css":"amc-flex-1 amc-margin-t dlg-btn amc-font-m amc-align-center","children":[{"tag":"text","text":"我知道了"}],"onclick":"hideInfoDialog();","tag":"label"}],"tag":"dialog","id":"de-info-dialog"}],"tag":"body","id":"body","onkeydown":"onKeyDown();","onload":"init();"}],"tag":"html"},"publishVersion":"150924","name":"mdeduct-payandsign-flex","format":"JSON","tag":"QUICKPAY","time":"0016","tplId":"QUICKPAY@mdeduct-payandsign-flex","tplVersion":"5.2.9"}