{"time":"0004","tplId":"QUICKPAY@afterpay-recommend-flex","publishVersion":"150924","tag":"QUICKPAY","name":"afterpay-recommend-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","src":"AlipaySDK.bundle/amc-common-util.js"},{"tag":"script","children":[{"text":"var iFaceConfig={recTitle:\"{{enable_faceid}}\",protocolURL:\"https://render.alipay.com/p/f/fd-j9rud5y4/index.html\",protocol:\"{{faceid_protocol}}\"};var aFaceConfig={recTitle:\"{{enable_android_faceid}}\",protocolURL:\"https://render.alipay.com/p/f/fd-jgvlcrr0/index.html\",protocol:\"{{android_faceid_protocol}}\"};var fpConfig={recTitle:\"{{open_finger_pay}}\",protocolURL:\"https://d.alipay.com/agreement/zw.htm\",protocol:\"{{finger_protocol}}\"};var getTag=amc.fn.getById;var rpc=amc.rpcData;var create=amc.fn.create;var spmParams={uid:rpc.uid,tradeNo:rpc.tradeNo};var gFeedbackBizCode=\"pay\";var gIsCommonMode;var gIsNoActionMode=false;var gExtParams=rpc.extParams||{};function init(){try{initUI();spmExposure(\"a283.b2979.c10778.d19781\");spmExposure(\"a283.b2979.c10778.d19780\");spmExposure(\"a283.b2979.c10778\");if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){gIsCommonMode=!(gExtParams.isOldRecommendMode===\"true\");if(rpc.type===\"vi\"){gIsNoActionMode=!!(rpc.clientParams&&rpc.clientParams.noAction)}var b=getTag(\"btnContainer\");if(amc.isAndroid){var a=480;if(window.innerWidth&&window.innerWidth<480){a=window.innerWidth}getTag(\"dlg\").style.width=a-80;getTag(\"titleBox\").className=\"title-box-and\";getTag(\"recTitle\").className=\"rec-title-and\";getTag(\"contentBox\").className=\"content-box-and\";getTag(\"recTipBox\").className=\"rec-tip-box-and\";getTag(\"recTip\").className=\"rec-tip-and\";getTag(\"recProtocol\").className=\"rec-protocol-and\";createAndroidBtns(b,rpc.cancelText,rpc.enableText)}else{createIOSBtns(b,rpc.cancelText,rpc.enableText)}if(gIsCommonMode){processCommonRecommend()}else{processOldRecommend()}}function processOldRecommend(){var c=(\"face\"==rpc.type);var b=c?(amc.isAndroid?aFaceConfig:iFaceConfig):fpConfig;getTag(\"recTitle\").innerText=b.recTitle;getTag(\"recTip\").innerText=rpc.recTip||\"\";var a=rpc.protocolURL||b.protocolURL;if(c){getTag(\"recProtocol\").innerText='\\u00A0{{agree}}<a color=\"#108ee9\" href=\"'+a+'\">'+b.protocol+\"\\u00A0</a>\"}else{getTag(\"recProtocol\").innerText='{{agree}}<a color=\"#108ee9\" href=\"'+a+'\">'+b.protocol+\"</a>\"}getTag(\"dlg\").showModal()}function processCommonRecommend(){if(rpc.type!==\"vi\"&&rpc.type!==\"familyPay\"){amc.fn.logCount(\"RecDlg\",\"unknown-type-\"+rpc.type);amc.fn.exit()}else{getTag(\"recTitle\").innerText=rpc.title||\"\";getTag(\"recTip\").innerText=rpc.recTip||\"\";var a=\"\";if(checkText(rpc.agreementSuffix)===\"\"&&checkText(rpc.agreementPrefix)===\"\"){a+=\"\";amc.fn.hide(getTag(\"recProtocol\"))}else{a=a+checkText(rpc.agreementPrefix)+'<a color=\"#108ee9\" href=\"'+checkText(rpc.protocolUrl)+'\">'+checkText(rpc.agreementSuffix)+\"</a>\";getTag(\"recProtocol\").innerText=a}getTag(\"dlg\").showModal()}}function checkText(a){return a||\"\"}function createIOSBtns(e,c,g){var j=create(\"div\",\"amc-adapt-line\",e);var i=create(\"div\",\"amc-flex-1\",e);if(!gIsNoActionMode){var h=create(\"div\",\"amc-flex-1 btn-div\",i);var a=create(\"label\",\"btn-text-sub amc-flex-1 amc-text-center amc-ellipsis\",h);a.innerText=c||\"{{cancel}}\";h.onclick=cancelRec;var b=create(\"div\",\"btn-vertical-line\",i)}var d=create(\"div\",\"amc-flex-1 btn-div\",i);var f=create(\"label\",\"btn-text amc-flex-1 amc-text-center amc-ellipsis\",d);f.innerText=g||\"{{confirm}}\";d.onclick=confirmRec}function createAndroidBtns(e,b,d){var h=create(\"div\",\"btn-box-and\",e);if(!gIsNoActionMode){var g=create(\"div\",\"btn-div-and\",h);var c=create(\"label\",\"btn-text-sub-and amc-text-center amc-ellipsis\",g);c.innerText=b||\"{{cancel}}\";g.onclick=cancelRec}var a=create(\"div\",\"btn-div-and\",h);var f=create(\"label\",\"btn-text-and amc-text-center amc-ellipsis\",a);f.innerText=d||\"{{to_enable}}\";a.onclick=confirmRec}function onKeyDown(){}function cancelRec(){spmClick(\"a283.b2979.c10778.d19780\");getTag(\"dlg\").close();amc.fn.exit()}function confirmRec(){spmClick(\"a283.b2979.c10778.d19781\");if(gIsCommonMode){processCommonConfirm()}else{processOldConfirm()}getTag(\"dlg\").close()}function processCommonConfirm(){if(rpc.type===\"vi\"){if(gIsNoActionMode){amc.fn.exit();return}var a=CommonUtil.merge({verifyType:\"recommend\"},rpc.clientParams);document.invoke(\"verifyIdentity\",a,function(b){if(b){if(b.code===\"1000\"){processCommonSubmit({VIData:b})}else{amc.fn.logCount(\"RecDlg\",\"vi-failed\");amc.fn.exit()}}else{amc.fn.logError(\"RecDlg-vi-data\",\"data: \"+b);amc.fn.exit()}})}else{if(rpc.type===\"familyPay\"){processCommonSubmit({})}}}function processCommonSubmit(a){document.submit({action:{name:\"/cashier/recommend\",params:{recType:rpc.type,clientParams:a,bizParams:rpc.bizParams||{}}}})}function processOldConfirm(){var a={action:{name:rpc.nextAction}};if(amc.isAndroid){a.action[\"loadtxt\"]=\"\"}document.submit(a)}function showProtocol(a){document.submit({action:{name:\"loc:openweb('\"+a+\"')\"}})}function spmClick(a,b){spmTrackerFeedback(\"click\",\"clicked\",a,b||spmParams)}function spmExposure(a,b){spmTrackerFeedback(\"exposure\",\"exposure\",a,b||spmParams)}function spmTrackerFeedback(a,g,b,f){if(!a||!b){return}try{var d={type:a,spmId:b,param4:f!=null?JSON.stringify(f):\"\",actionId:g||\"click\",logLevel:\"2\",bizCode:gFeedbackBizCode};amc.fn.feedback(\"spmtracker\",d)}catch(c){}};","tag":"text"}]},{"tag":"style","children":[{"text":".dlg-body {\n        background-color: #FFF;\n        border-radius:4px;\n        width: 270px;\n    }\n    .rec-title {\n        color: #333333;\n        font-size: 18px;\n        text-align: center;\n    }\n    .rec-title-and {\n        font-size: 20px;\n        text-align: left;\n    }\n    .title-box {\n        margin: 24px 12px 0 12px;\n    }\n    .title-box-and {\n        margin: 18px 24px 0 24px;\n    }\n    .content-box {\n        margin: 8px 12px 0 12px;\n    }\n    .content-box-and {\n        margin: 16px 24px 0px 24px;\n    }\n    .rec-tip {\n        color: #333333;\n        font-size: 14px;\n        text-align: center;\n    }\n    .rec-tip-and {\n        text-align: left;\n        font-size: 16px;\n    }\n    .rec-tip-box {\n        margin: 0 0 16px 0;\n    }\n    .rec-tip-box-and {\n        margin: 0 0 12px 0;\n    }\n    .rec-protocol {\n        color: #333333;\n        text-align: center;\n        font-size: 14px;\n        margin-bottom: 16px;\n    }\n    .rec-protocol-and {\n        text-align: left;\n        font-size: 16px;\n    }\n    .btn-div {\n        padding: 0 5px;\n        background-color: #fff;\n    }\n    .btn-div:active {\n        background-color: #ddd;\n    }\n    .btn-div-and {\n        padding: 4px 16px;\n        border-radius: 2px;\n        height: 32px;\n        margin-left: 3px;\n        background-color: #fff;\n    }\n    .btn-div-and:active {\n        background-color: #ddd;\n    }\n    .btn-text {\n        color: #108ee9;\n        margin: 12px 0;\n        font-size: 18px;\n    }\n    .btn-text-sub {\n        color: #999;\n        margin: 12px 0;\n        font-size: 18px;\n    }\n    .btn-text-and {\n        color: #108ee9;\n        font-size: 16px;\n    }\n    .btn-text-sub-and {\n        color: #999;\n        font-size: 16px;\n    }\n    .btn-vertical-line {\n        width: 1px;\n        align-self: stretch;\n        background-color: #e5e5e5;\n    }\n    .btn-box-and {\n        align-items: center;\n        justify-content: flex-end;\n        padding: 10px 8px;\n    }","tag":"text"}]}]},{"onload":"init()","tag":"body","children":[{"id":"dlg","tag":"dialog","children":[{"id":"titleBox","tag":"div","children":[{"id":"recTitle","tag":"label","css":"rec-title amc-flex-1"}],"css":"amc-v-box amc-flex-1 title-box"},{"id":"contentBox","tag":"div","children":[{"id":"recTipBox","tag":"div","children":[{"id":"recTip","tag":"label","css":"rec-tip amc-flex-1 amc-ellipsis-3-line"}],"css":"rec-tip-box amc-flex-1 amc-v-box"},{"id":"recProtocol","highlightcolor":"#00000000","onlink":"showProtocol","tag":"label","css":"rec-protocol"}],"css":"amc-v-box content-box"},{"id":"btnContainer","tag":"div","css":"amc-v-box amc-justify-center"}],"onkeydown":"onKeyDown()","css":"dlg-body amc-v-box"}],"css":"amc-body amc-opacity"}]},"format":"JSON","tplVersion":"5.4.0"}