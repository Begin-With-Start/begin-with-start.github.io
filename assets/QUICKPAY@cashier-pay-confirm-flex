{"data":{"children":[{"children":[{"src":"AlipaySDK.bundle/amc.i18n","tag":"meta","type":"i18n"},{"src":"AlipaySDK.bundle/amc.js","tag":"script"},{"src":"AlipaySDK.bundle/amc-usq.js","tag":"script"},{"rel":"stylesheet","tag":"link","href":"AlipaySDK.bundle/amc.css"},{"children":[{"tag":"text","text":"var rpc=amc.rpcData;var getTag=amc.fn.getById;var hide=amc.fn.hide;var show=amc.fn.show;var create=amc.fn.create;var logAction=amc.fn.logAction;var PAYMENT_CODE_SUCCESS=\"0001\";var canGoBack=true;var VI_ACTION_START=\"viStart\";var VI_ACTION_START_HUAWEI=\"viPreStart\";var VI_ACTION_RPC_RESPONSE=\"viRpcResponse\";var VI_ACTION_PAY_STATUS=\"payStatus\";var VI_ACTION_CLOSE_PAGE=\"viClosePage\";var VI_CHANNEL_MODE_FROM_TEMPLATE=\"1\";var VI_LOG_ACTION_TYPE=\"VI\";var bizId=\"-1\";var pwdType=null;var viPwdTip=null;var isPaySuccessShown=false;var isPayBtnShown=true;var needConfirm=false;var hasDiscount=false;var separatorRendered=false;var verifyWithVI=false;var loaded=false;var isResume=false;var spmServerParam4Str=\"{}\";var isClose=false;var mutexDegrade=false;var mutexTimerVIVerify=null;var gScaleFactor=\"1\";var gTitleScale=18;var gConfirmBtnHeight=44;var gConfirmBtnTop=12;var gConfirmBtnTxt=18;var gVILenRecored=false;function SubmitMutex(){this.occupier=null}SubmitMutex.prototype={constructor:SubmitMutex,occupied:function(b){b=b||\"anon\";var a=!!this.occupier;logAction(b+(a?\"-Y\":\"-N\"),\"readMutex\");return a},occupy:function(b,c,a){if(mutexDegrade){return true}b=b||\"anon\";c=c?(\"-\"+c):\"\";c=b+c;if(a&&this.occupier===b){return true}if(this.occupier){logAction(c,\"occupyMutexFail\");amc.fn.logCount(\"mutexFail\",this.occupier+\"-\"+b);return false}this.occupier=b;logAction(c,\"occupyMutex\");return true},releaseAsync:function(c,b,d){b=b||0;var a=this;setTimeout(function(){a.releaseSync(c,d)},b)},releaseSync:function(a,b){if(mutexDegrade){return false}a=a||\"anon\";b=b?(\"-\"+b):\"\";b=a+b;if(this.occupier===a){this.occupier=null;logAction(b,\"releaseMutex\");return true}return false}};var submitMutex=new SubmitMutex();function releaseVIMutex(c,a,b){if(submitMutex.occupier!==\"VIVerify\"){return}if(mutexTimerVIVerify){clearTimeout(mutexTimerVIVerify);mutexTimerVIVerify=null}mutexTimerVIVerify=setTimeout(function(){if(submitMutex.occupier===\"VIVerify\"){submitMutex.releaseSync(\"VIVerify\",c);b&&b()}},a)}function isRpcAction(a){a=a+\"\";return(a.indexOf(\"loc:\")<0)}function asyncSubmitWithMutex(d,e,c,b,f){if(!isRpcAction(c&&c.action&&c.action[\"name\"])){document.asyncSubmit(c,f);return true}if(d.occupy(e)){var a=true;setTimeout(function(){if(a){var g=d.releaseSync(e,\"timeout\");if(g){amc.fn.logError(\"mutexSubmitFail\",e)}}},300);document.asyncSubmit(c,function(g){a=false;g=g||{};if(g.pageloading===\"0\"||!g.pageloading){if(b){d.releaseSync(e)}else{d.releaseAsync(e,100)}}f&&f(g)});return true}return false}function tryJSONParse(a){if(amc.fn.isObject(a)){return a}try{var c=JSON.parse(a);return c}catch(b){return{}}}function onload(){if(isPrerender(flybird)){return}loadData(amc.rpcData)}function loadData(a){if(loaded){return}loaded=true;initGlobalVariable(a);amc.fn.spmPageCreate(\"a283.b4036\",tryJSONParse(spmServerParam4Str));init()}function isPrerender(a){return a&&(a.local&&a.local.isPrerender||a.rpcData&&a.rpcData.isPrerender)}document.onreload=function(a){if(isPrerender(a)){return}if(a&&a.local){flybird.local=a.local}if(a&&a.rpcData){loadData(a.rpcData)}else{if(verifyWithVI){if(!needConfirm){startVIPlugin(rpcVIData,\"viHuaweiFingerPayCallback\",true)}}pageResumeCallback()}};document.viewDidAppear=function(){if(isResume){amc.fn.spmExposureResume();payBtnExposure()}else{isResume=true;amc.fn.postNotification(\"MQPPreNotification\",{biz:\"h5ResultPageWebView\",progress:\"preRender\"})}};function pageResumeCallback(){if(submitMutex&&submitMutex.occupied(\"resume\")){var a=submitMutex.occupier;submitMutex.releaseSync(a,\"resume\");amc.fn.logError(\"mutexResume\",a)}}function initGlobalVariable(b){rpc=b;mutexDegrade=rpc.pageSwitch&&rpc.pageSwitch.mutexDegrade;confirmFQG=(rpc.is_fqg===\"Y\")?\"{{confirm_fqg}}\":\"\";showAggr=(rpc.show_aggr===\"Y\");showLogo=rpc.showLogo||false;interactType=rpc.interactType||\"1\";displaySingleProtocol=rpc.protocolName&&rpc.protocolUrl;displayMutilProtocols=amc.fn.isArray(rpc.protocols)||(!displaySingleProtocol);rpcVIData=rpc.VIData;verifyWithVI=!!rpcVIData;VIDataForPwdPage=rpcVIData;bizId=flybird.local.bizId||bizId;var a=function(){amc.fn.fetchCache(bizId+\"needConfirm\",function(c){if(c&&c.needConfirm===true){needConfirm=true}else{needConfirm=!!rpc.chargeMsg}if(verifyWithVI){if(!needConfirm){startVIPlugin(rpcVIData,\"viHuaweiFingerPayCallback\",true)}}else{logAction(\"non-VI\",VI_LOG_ACTION_TYPE)}amc.fn.putCache(bizId+\"needConfirm\",{needConfirm:needConfirm},false)},false)};if(amc.isIOS){a()}else{setTimeout(a,20)}confirmAction=buildConfirmActionWithAct(rpc.confirmAct);helpQuery=rpc.helpQuery||\"\";helpUrl=rpc.helpUrl||\"\";spmServerParam4Str=amc.fn.isObject(rpc.spmObj)?JSON.stringify(rpc.spmObj):\"{}\";if(!amc.isSDK&&amc.fn.sdkGreaterThanOrEqual(\"10.8.29\")){gScaleFactor=document.getCustomAttr(\"scaleFactor\")||\"1\";gTitleScale={\"0\":17,\"1\":18,\"2\":19,\"3\":20,\"4\":21}[gScaleFactor];gConfirmBtnHeight={\"0\":44,\"1\":44,\"2\":46,\"3\":48,\"4\":50}[gScaleFactor];gConfirmBtnTop={\"0\":12,\"1\":12,\"2\":10,\"3\":8,\"4\":6}[gScaleFactor];gConfirmBtnTxt={\"0\":17,\"1\":18,\"2\":19,\"3\":20,\"4\":20}[gScaleFactor]}}function init(){try{initUI();initUsq();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUsq(){try{var a=amc.fn.getUserId();amc.ext.processCashierCfgDate(a,rpc.cashierCfgData)}catch(b){amc.fn.logError(\"usq\",\"初始化答题失败\"+b)}}function initNav(){var a;if(showLogo){a=amc.path+\"alipay_msp_i_logo\"}var c=true;if(c){amc.fn.spmExposure(\"a283.b4036.c9695.d17383\",tryJSONParse(spmServerParam4Str))}var d=amc.fn.iNav(amc.res.close,rpc.navTitle||\"{{pay_detail}}\",null,c?amc.res.help:null,onClose,c?onHelp:null,a);d.id=\"iNav\";getTag(\"body\").insertBefore(d,getTag(\"iLine\"));amc.fn.spmExposure(\"a283.b4036.c9695.d17382\",tryJSONParse(spmServerParam4Str));getTag(\"iNavImgR\")&&(getTag(\"iNavImgR\").alt=\"{{help}}\");getTag(\"iNavImgR\")&&(getTag(\"iNavImgR\").accessibilityTraits=\"Button\");getTag(\"iNavImgM\")&&(getTag(\"iNavImgM\").alt=\"{{alipay}}\");var b=getTag(\"iNavTitle\");b.accessibilityTraits=\"Header\";b.style.fontSize=gTitleScale+\"px\"}function initUI(){initNav();if(rpc.cost){var a=getTag(\"totalCost\");var n=rpc.cost||\"\";if(rpc.hideRmbIcon){hide(getTag(\"totalCostImg\"))}else{getTag(\"totalCostImg\").src=amc.path+\"alipay_msp_rmb\";if(amc.isIOS){getTag(\"totalCostImg\").style.marginBottom=\"7px\"}if(amc.isAndroid){getTag(\"totalCostImg\").style.marginBottom=\"0px\"}}a.innerText=n;a.style.maxWidth=window.innerWidth-(30+30);amc.fn.show(\"totalCostBox\")}var f=getTag(\"confirmLabel\");f.innerText=confirmFQG||rpc.btnName||\"{{pay_right_now}}\";f.accessibilityTraits=\"Button\";f.style.fontSize=gConfirmBtnTxt+\"px\";getTag(\"largeLoadingText\").style.fontSize=gConfirmBtnTxt+\"px\";getTag(\"btnWithSmallLoading\").style.height=gConfirmBtnHeight+\"px\";getTag(\"pseudoLoadingBtn\").style.height=gConfirmBtnHeight+\"px\";getTag(\"btnContainer\").style.marginTop=gConfirmBtnTop=\"px\";var d=amc.specs.bottomHeight||0;var k=amc.specs.iBodyHeight-amc.specs.iNavHeight-68-d;if(rpc.payTool){createPayment(rpc.payTool,rpc.redPoint,rpc.channels);k-=48}if(rpc.propagate&&rpc.propagate.title){createPropagate(rpc.propagate);k-=47+4}else{if(rpc.payTool){createPaymentBottomLine();k-=1}}if(showAggr){if(displaySingleProtocol){getTag(\"singleProtocol\").innerText=rpc.protocolName;getTag(\"singleProtocol\").accessibilityTraits=\"Button\";show(\"singleProtocol\");k-=30}if(displayMutilProtocols){getTag(\"multiProtocol\").innerText=rpc.protocolsFoldName||\"{{serve_protocol}}\";getTag(\"multiProtocol\").accessibilityTraits=\"Button\";show(\"multiProtocol\");k-=30;if(displaySingleProtocol){getTag(\"multiProtocol\").style.marginTop=\"5px\";k-=5}}show(\"protocolBox\");k-=20}if(rpc.account&&(amc.isSDK||rpc.newAccountSwitch)){createDetail(\"{{alipay_account}}\",rpc.account)}for(var l=0;rpc.detail&&l<rpc.detail.length;l++){var g=rpc.detail[l];switch(g.type){case\"separator\":createSeparatorDetail();separatorRendered=true;k-=13;break;case\"\":default:var b=separatorRendered?getTag(\"fixedDetailBox\"):undefined;var c=createDetail(g.info,g.price,g.isDiscount,b);if(separatorRendered&&c){k-=32}if(g.isDiscount){hasDiscount=true}if(g.propagate){var q=createPropagate(g.propagate,b);if(q){k-=47+4}}break}}if(rpc.productDetailKey){createDetail(rpc.productDetailKey,rpc.productDetail)}if(rpc.product){createDetail(rpc.order||\"{{order_info}}\",rpc.product)}var p=0;if(rpc.gonggao){var o=create(\"div\");o.className=\"amc-marquee amc-pd-lr\";var e=amc.fn.getMarquee(rpc.gonggao);o.appendChild(e);e.style.width=window.innerWidth-(amc.isPlus?40:30);getTag(\"body\").insertBefore(o,getTag(\"iNav\"));p=amc.specs.marqueeHeight}var m=166;var s=Math.max(m-k,0);var r=amc.specs.iBodyHeight+p+s;var j=Math.min(r,window.innerHeight*0.92);var h=Math.max(k,m)-(r-j);getTag(\"scrollableBox\").style.maxHeight=h+\"px\";getTag(\"body\").style.height=j+\"px\";getTag(\"largeLoadingText\").style.maxWidth=window.innerWidth-70;if(amc.isAndroid){getTag(\"smallLoading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}payBtnExposure()}function payBtnExposure(){isPayBtnShown=true;setTimeout(function(){if(isPayBtnShown){var a=tryJSONParse(spmServerParam4Str);a.discount=hasDiscount;amc.fn.spmExposure(\"a283.b4036.c9693.d17385\",a,true)}},300)}function buildConfirmActionWithAct(b){var a={name:\"/cashier/pay\"};if(b&&b.name){a=b}a.loadtxt=\"\";if(verifyWithVI){a.viChannelMode=VI_CHANNEL_MODE_FROM_TEMPLATE}return a}function calculateFontWidth(d){if(!d){return 0}var b=0;var c=/^[A-Za-z0-9\\.\\(\\)]*$/;for(var a=0;a<d.length;a++){if(c.test(d[a])){b+=0.45}else{b++}}return Math.round(b)}function substrWithFontWidth(h,e,g){if(!h){return h}var j=\"\";var f=0;var a=h.length;for(var c=0;c<a;c++){var b=g?h[a-c-1]:h[c];var d=/^[A-Za-z0-9\\(\\)]*$/;if(d.test(b)){f+=0.45}else{f++}j+=b;if(f>e-1){break}}return j}function shouldShowWithSmallerFont(e,b,f){var d=window.innerWidth-30-72-(!!b+0)*17-(!!f+0)*17-5;var c=calculateFontWidth(e);var a=Math.floor(d/(16+1));return a<c}function truncatePayment(g,c,h){var f=window.innerWidth-30-72-(!!c+0)*17-(!!h+0)*17-5;var e=calculateFontWidth(g);var d=Math.floor(f/(14+1));if(d<e){var b=calculateFontWidth(g.substr(-9,g.length));var a=(substrWithFontWidth(g,d-b)||\"\").length;g=amc.fn.stringTruncate(g,a,9)}return g}function createPayment(e,c,m){if(!e){return}if(!m){c=false}var d=getTag(\"anchoredBox\");create(\"div\",\"amc-1px-line\",d);amc.fn.show(\"anchoredBox\");var l=create(\"div\",\"item-box amc-align-center\",d);var h=create(\"label\",\"info-text font-color-info\",l);h.style.maxWidth=\"72px\";h.innerText=\"{{pay_tool}}\";var a=\"info-text info-value font-color-primary amc-flex-1 amc-ellipsis\";if(shouldShowWithSmallerFont(e,c,m)){a=\"info-text-s info-value font-color-primary amc-flex-1 amc-ellipsis\";e=truncatePayment(e,c,m)}var g=create(\"label\",a,l);g.innerText=e||\"\";g.accessibilityTraits=\"Button\";if(c){var k=create(\"div\",\"red-point\",l);k.style.marginLeft=\"8px\"}if(m){var i=create(\"div\",\"img-box\",l);var f=create(\"img\",\"arrow-img\",i);f.src=amc.res.arrowRight;var j=create(\"img\",\"amc-hidden\",i);j.src=\"indicatior\";var b=tryJSONParse(spmServerParam4Str);b.isRed=!!c;l.onclick=function(){var o={action:{name:\"/cashier/switchChannel\",loadtxt:\"\"}};o.param={};o.param[\"fromCashier\"]=true;var n=asyncSubmitWithMutex(submitMutex,\"switchChannel\",o,false,function(p){p=p||{};amc.fn.shouldShowBtnIndicator(p,f,j)});if(n){hide(f);show(j)}amc.fn.spmClick(\"a283.b4036.c9694.d17384\",b)};amc.fn.spmExposure(\"a283.b4036.c9694.d17384\",b)}return l}function createPaymentBottomLine(){var a=getTag(\"anchoredBox\");create(\"div\",\"amc-1px-line margin-l\",a)}function createSeparatorDetail(){create(\"div\",\"amc-1px-sep-line\",getTag(\"fixedDetailBox\"));amc.fn.show(\"fixedDetailBox\")}function createDetail(g,f,b,e){if(!g&&!f){return false}var a=e?e:getTag(\"scrollableBox\");var i=create(\"div\",\"info-box amc-align-cetner\",a);var d=null;if(g){d=create(\"label\",\"info-text font-color-info amc-ellipsis\"+(b?\" font-color-highlight\":\"\"),i);d.innerText=g}var h=null;if(f){h=create(\"label\",\"info-text info-value font-color-primary amc-flex-1 amc-ellipsis\"+(b?\" font-color-highlight\":\"\"),i);h.emoji=\"true\";h.innerText=f}if(d&&h){var c=calculateFontWidth(f);if(c*(16+1)<((window.innerWidth-40)/2)){d.className+=\" amc-flex-1\";h.style.flex=\"0\"}else{d.className+=\" info-k-w-limit\"}}else{if(d){d.className+=\" amc-flex-1\"}else{if(h){h.style.marginLeft=\"40%\"}}}return true}function createPropagate(i,b){if(!i||!i.title){return false}var q=!b;var g=b?b:getTag(\"anchoredBox\");amc.fn.show(\"anchoredBox\");var m=create(\"div\",\"propagate-inner-container\",g);if(q){m.style.cssText=\"margin-left: 16px; margin-right: 16px;\"}var p=i.actTitle;var e=create(\"div\",\"item-box-for-propagate amc-align-center amc-flex-1\",m);if(rpc.payTool||b){var k=create(\"img\",\"propagate-arrow\",m);k.contentMode=\"center\";k.src=amc.path+\"alipay_msp_propagate_arrow\"}var a=i.channelLogo;if(a===\"money_fund\"||a===\"ant_credit_pay\"||i.showIcon||(amc.fn.sdkGreaterThanOrEqual(\"10.8.29\")&&a===\"red_bag\")){var n=create(\"img\",\"propagate-icon\",e);if(a===\"money_fund\"){n.src=amc.path+\"alipay_msp_moneyfund_logo\"}else{if(a===\"ant_credit_pay\"){n.src=amc.path+\"alipay_msp_pcredit_logo\"}else{if(a===\"red_bag\"){n.src=amc.path+\"alipay_msp_red_bag\"}else{n.src=amc.path+\"alipay_msp_icon_notice\"}}}}var j=i.action?e:\"\";var f=null;if(p){f=create(\"label\",\"info-text-propagate font-color-primary amc-flex-1 amc-ellipsis\",e);var o=create(\"div\",\"item-btn amc-flex-center\",e);var c=create(\"label\",\"item-btn-text amc-ellipsis\",o);c.innerText=p;c.accessibilityTraits=\"Button\";o.onmousedown=function(){o.style.backgroundColor=\"#108ee9\";c.style.color=\"#fff\"};o.onmouseup=function(){o.style.backgroundColor=\"#fff\";c.style.color=\"#108ee9\"};j=o}else{f=create(\"label\",\"double-line-for-propagate info-text-propagate font-color-primary amc-flex-1 amc-ellipsis-2-line\",e);var h=\"item-box-s-for-propagate amc-align-center amc-flex-1\";e.className=h}if(i.confirmDlg&&i.newTitle){f.innerText=i.newTitle}else{f.innerText=i.title}var d=tryJSONParse(spmServerParam4Str);var l=tryJSONParse(i.spmObj);for(var r in l){d[r]=l[r]}amc.fn.spmExposure(\"a283.b4036.c9696.d17381\",d);if(j){j.onclick=function(){if(i.confirmDlg){var u=i.confirmDlg;document.confirm({title:u.title||\"\",message:u.message||\"\",okButton:u.rightTxt||\"\",cancelButton:u.leftTxt||\"\"},function(v){if(v.ok){asyncSubmitWithMutex(submitMutex,\"dlgOk\",{action:u.rightAct},false,function(w){});amc.fn.spmClick(\"a283.b4036.c33398.d66514\",l)}else{asyncSubmitWithMutex(submitMutex,\"dlgCancel\",{action:u.leftAct},false,function(w){});amc.fn.spmClick(\"a283.b4036.c33398.d66513\",l)}});amc.fn.spmExposure(\"a283.b4036.c33398.d66514\",l);amc.fn.spmExposure(\"a283.b4036.c33398.d66513\",l)}else{var t={action:{name:i.action,loadtxt:\"\"}};t.param=i.param;if(t.param){t.param[\"first_enter_cashier\"]=t.param[\"first_enter_cashier\"]||false}var s=asyncSubmitWithMutex(submitMutex,\"propagate\",t,false,function(v){});if(s&&i.dlg){setTimeout(function(){showDlg(i.dlg)},1000)}}amc.fn.spmClick(\"a283.b4036.c9696.d17381\",d)}}return true}function showMultiProtocol(){var a=rpc.protocols||[{text:\"{{pcredit_protocol}}\",url:\"https://ds.alipay.com/credit/infoContract.htm\"},{text:\"{{pcredit_user_protocol}}\",url:\"https://ds.alipay.com/credit/hbContract.htm\"}];amc.fn.showProtocolList(a)}function showSingleProtocol(){document.submit({action:{name:\"loc:openweb('\"+rpc.protocolUrl+\"', '\"+(rpc.protocolTitle||\"{{serve_protocol}}\")+\"')\"}})}function gotoPwdPage(){var a={};a={action:{name:\"loc:bnvb\"},param:{tplid:\"QUICKPAY@cashier-pwd-check-flex\",tpl:rpc.viPwdTpl,data:{payOrder:canGoBack,pwdTip:rpc.pwdTip,logon_id:rpc.logon_id,VIData:VIDataForPwdPage,confirmAct:confirmAction}}};document.submit(a)}function onPaySuccess(){var b=getTag(\"largeLoadingText\");hide(\"btnWithSmallLoading\");show(\"pseudoLoadingBtn\");getTag(\"gifImg\").src=amc.res.success;b.style.opacity=0.2;var a=setTimeout(function(){b.innerText=\"{{pay_ok}}   \";b.style.opacity=1},500);isPaySuccessShown=true}function largeLoadingWithText(a){hide(\"gifImg\");getTag(\"largeLoadingText\").innerText=a||\"\";showPayingPseudoBtn();show(\"gifImg\")}function stopLargeLoading(){hide(\"pseudoLoadingBtn\");getTag(\"gifImg\").src=\"\";show(\"btnWithSmallLoading\");show(\"realBtn\");hide(\"smallLoading\")}function showPayingPseudoBtn(){hide(\"btnWithSmallLoading\");show(\"pseudoLoadingBtn\");getTag(\"gifImg\").src=amc.res.loading}function smallLoading(){hide(\"realBtn\");show(\"smallLoading\")}function executeWithInteractType0(){var b={};b.action=confirmAction;var a=asyncSubmitWithMutex(submitMutex,\"non-vi-0\",b,false,function(c){c=c||{};if(c.confirmAct&&c.confirmAct.name){confirmAction=buildConfirmActionWithAct(c.confirmAct)}amc.fn.shouldShowBtnIndicator(c,\"realBtn\",\"smallLoading\")});if(a){smallLoading()}}function executeWithOutVI(){if(interactType===\"0\"){executeWithInteractType0()}else{if(interactType===\"1\"){executeWithInteractType1()}}}function onButtonClick(){if(!verifyWithVI&&submitMutex.occupied(\"button\")){amc.fn.logCount(\"mutexOccupied\",submitMutex.occupier+\"-button\");return}var c=tryJSONParse(spmServerParam4Str);c.discount=hasDiscount;amc.fn.spmClick(\"a283.b4036.c9693.d17385\",c);var a=verifyWithVI?executeWithVI:executeWithOutVI;if(rpc.chargeMsg){var b={title:\"\",message:rpc.chargeMsg,okButton:rpc.chargeConfirmTxt||\"{{confirm_btn}}\",cancelButton:rpc.chargeCancelTxt||\"{{cancel}}\"};document.confirm(b,function(d){if(d.ok){a()}})}else{a()}}function onClose(){amc.fn.spmClick(\"a283.b4036.c9695.d17382\",tryJSONParse(spmServerParam4Str));var a=function(){if(submitMutex.occupier){amc.fn.logError(\"mutexQuit\",submitMutex.occupier)}amc.fn.spmPageDestroy(\"a283.b4036\");amc.fn.exit();isClose=true};try{amc.ext.processCashierCfgExit(a)}catch(b){amc.fn.logError(\"usq\",\"退出答题异常\"+b);a()}}function onHelp(){amc.fn.spmClick(\"a283.b4036.c9695.d17383\",tryJSONParse(spmServerParam4Str));var a=\"https://csmobile.alipay.com/router.htm?scene=app_paymentpage\";if(helpUrl){a=helpUrl}else{if(helpQuery){a=(helpQuery.indexOf(\"&\")===0)?a+helpQuery:a+\"&\"+helpQuery}}amc.fn.logCount(\"help\",\"pay-cfm\");document.submit({action:{name:\"loc:openweb('\"+a+\"', '{{help}}')\"}})}function onKeyDown(){if(event.which==4){if(submitMutex.occupied(\"keyback\")){amc.fn.logCount(\"mutexBack\",submitMutex.occupier)}else{onClose()}}}function showDlg(a){if(!a||!a.btnRight||!a.dlgTxt||!a.btnLeft||!a.btnRightAction){return}getTag(\"dlgTxt\").innerText=a.dlgTxt;getTag(\"btnLeft\").innerText=a.btnLeft;getTag(\"btnRight\").innerText=a.btnRight;getTag(\"btnRight\").onclick=function(){var b={action:{name:a.btnRightAction}};document.submit(b);getTag(\"dlg\").close()};getTag(\"dlg\").showModal()}function executeWithInteractType1(){var b={action:confirmAction};b.action[\"neec\"]=\"6004\";var a=asyncSubmitWithMutex(submitMutex,\"non-vi-1\",b,false,function(d){d=d||{};if(d.confirmAct&&d.confirmAct.name){confirmAction=buildConfirmActionWithAct(d.confirmAct)}var c=d.status;if(isPaySuccessShown){return}if(c===PAYMENT_CODE_SUCCESS){onPaySuccess()}else{if(c===\"0002\"||c===\"0006\"||c===\"0000\"){stopLargeLoading()}}if(d.pageloading===\"1\"){showPayingPseudoBtn()}else{if(d.pageloading===\"0\"){stopLargeLoading()}}});if(a){showPayingPseudoBtn()}}function executeWithVI(){if(!submitMutex.occupy(\"VIVerify\",\"startPlugin\",true)){return}releaseVIMutex(\"timeout\",600,function(){amc.fn.logError(\"mutexVITimeout\",\"mutex\")});startVIPlugin(rpcVIData,\"viStandardCallback\",false)}function startVIPlugin(b,d,a){if(!gVILenRecored){logAction(\"viLen|\"+(b||\"\").length,VI_LOG_ACTION_TYPE);gVILenRecored=true}var e=showAggr?\"{{agree_auth_fp}}\":\"{{auth_finger_or}}\";var c={action:a?VI_ACTION_START_HUAWEI:VI_ACTION_START,data:b,callbacks:{onViAction:d},config:a?{hwPaySuccessText:\"{{pay_success}}\",hwAuthingText:\"{{auth_fingering}}\",hwPayingText:\"{{paying}}\",hwRetryText:\"{{retry_finger}}\",hwAuthTip:e,hwInputPwdTip:\"{{input_pwd_s}}\"}:{fpAlertMsg:\"{{confirm_exit}}\",fpAlertCancelBtn:\"{{confirm_btn}}\",fpAlertToPwdBtn:\"{{input_pwd_s}}\",shouldDismissAfterAuth:\"Y\"}};sendDataToVIPlugin(c)}function sendDataToVIPlugin(a){logAction((a&&a.action)||\"action\",VI_LOG_ACTION_TYPE);getTag(\"viPlugin\").src=JSON.stringify(a)}function sendResponseDataToVI(a){var b={action:VI_ACTION_RPC_RESPONSE,data:a};sendDataToVIPlugin(b)}function viHuaweiFingerPayCallback(b){var a={viStatus:processVIStatusHuaweiFinger,viRpcRequest:processVIRpcRequestHuaweiFinger,viToPWD:processVIToPWD};processCallback(b,a)}function viStandardCallback(b){var a={viStatus:processVIStatus,viRpcRequest:processVIRpcRequest,viToPWD:processVIToPWD};processCallback(b,a)}function processCallback(c,a){var g={};try{g=JSON.parse(c)}catch(f){amc.fn.logError(\"VI\",\"解析核身JSON失败\"+f);return}var b=g.action;var d=g.data;if(b!=\"viStatus\"){logAction(b||\"actType\",VI_LOG_ACTION_TYPE)}releaseVIMutex(\"viCallback\",300);amc.fn.isString(b)&&a[b]&&a[b](d)}function processVIStatus(c){if(!c){return}var a=c.status;var b=c.type;logAction((b||\"type\")+\"-\"+(a||\"status\"),VI_LOG_ACTION_TYPE);if(a===\"start\"){pwdType=b;canGoBack=(b!=\"wl\");if(pwdType==\"pwd\"||pwdType==\"spwd\"){processVIToPWD(rpcVIData)}else{toggleBioProcessLoading(true)}}else{if(a===\"end\"){toggleBioProcessLoading(false)}else{if(a===\"abort\"){amc.fn.exit()}else{if(a===\"awaitUser\"){toggleBioProcessLoading(false)}}}}}function mergeObjcts(){var a={};if(arguments&&arguments.length){for(var c=0;c<arguments.length;c++){var d=arguments[c];if(!amc.fn.isObject(d)){continue}for(var b in d){a[b]=d[b]}}}return a}function processVIStatusHuaweiFinger(c){if(!c){return}var a=c.status;var b=c.type;logAction(\"hw-\"+(b||\"type\")+\"-\"+(a||\"status\"),VI_LOG_ACTION_TYPE);if(a===\"start\"){isPayBtnShown=false;hide(\"btnContainer\");show(\"viPwdBox\");canGoBack=false}else{if(a===\"abort\"){amc.fn.exit()}}}function toggleBioProcessLoading(a){if(pwdType!=\"fp\"&&pwdType!=\"wl\"&&pwdType!=\"faceid\"&&pwdType!=\"FACEID\"&&pwdType!=\"ZFACE\"){return}if(a){largeLoadingWithText(\"{{verifying}}\")}else{stopLargeLoading();getTag(\"largeLoadingText\").innerText=\"{{paying}}\"}}function processVIRpcRequest(a){var b=function(d){var c=d.status;if(c===PAYMENT_CODE_SUCCESS){onPaySuccess()}if(isPaySuccessShown){return}if(d.pageloading===\"1\"){largeLoadingWithText(\"{{paying}}\")}else{if(d.pageloading===\"0\"){stopLargeLoading()}}};submitMutex.releaseSync(\"VIVerify\",\"submitPay\");if(submitPay(a,b)){largeLoadingWithText(\"{{paying}}\")}}function submitPay(b,d){if(isClose){return false}var c={action:confirmAction};c.action[\"params\"]=mergeObjcts(c.action[\"params\"],{VIData:b});if(rpc.biztype!=\"openservice\"&&(confirmAction.name==\"/pwd/validate\"||confirmAction.name==\"/cashier/pay\"||confirmAction.name==\"/cashier/payment\")){c.action[\"neec\"]=\"6004\"}var a=asyncSubmitWithMutex(submitMutex,\"submitPay\",c,true,function(f){f=f||{};d&&d(f);if(f.confirmAct&&f.confirmAct.name){confirmAction=buildConfirmActionWithAct(f.confirmAct)}if(f.VIData){try{var e=JSON.parse(f.VIData).finishCode;logAction(\"viCode|\"+e,VI_LOG_ACTION_TYPE)}catch(g){}sendResponseDataToVI(f.VIData)}});return a}function processVIRpcRequestHuaweiFinger(b){var c=function(e){e=e||{};var d=e.status;if(d===PAYMENT_CODE_SUCCESS){showVILoadingWithPaymentResult(\"success\")}};submitMutex.releaseSync(\"VIVerify\",\"submitPay\");var a=submitPay(b,c)}function showVILoadingWithPaymentResult(a){var b={action:VI_ACTION_PAY_STATUS,data:{status:a}};sendDataToVIPlugin(b)}function processVIToPWD(a){if(!submitMutex.occupy(\"VIVerify\",\"toPwd\",true)){return}releaseVIMutex(\"toPwd\",500);VIDataForPwdPage=a;stopLargeLoading();gotoPwdPage()}function onDestroy(){viPageCloseNotify()}function viPageCloseNotify(){var a={action:VI_ACTION_CLOSE_PAGE};sendDataToVIPlugin(a)}function getPotentialProblems(){var b=amc.isAndroid?true:\"YES\";var a={potentialProblems:[{title:\"无法使用红包\",requirePicture:b},{title:\"无可用的支付方式\",requirePicture:b},{title:\"需要完善身份信息\",requirePicture:b},{title:\"其他问题\",requirePicture:b}]};return JSON.stringify(a)};"}],"tag":"script"},{"children":[{"tag":"text","text":".arrow-img {\n            margin-left: 4px;\n            width: 8px;\n            max-width: 8px;\n        }\n\n        .img-box {\n            width: 20px;\n            margin: 0 -8px 0 5px;\n            align-items: center;\n        }\n\n        .text-right {\n            text-align: right;\n        }\n\n        .change-discount {\n            color: #108ee9;\n            text-align: right;\n            flex: 0;\n        }\n\n        .btn-text {\n            font-weight: bold;\n            color: #108ee9;\n            margin: 15px 0;\n        }\n\n        .btn-vertical-line {\n            width: 1px;\n            align-self: stretch;\n            margin: 7px 0;\n            background-color: #eee;\n        }\n\n        .need-to-pay {\n            width: 100px;\n        }\n\n        .agree-label {\n            max-width: 100px;\n        }\n\n        .finger-text-l {\n            max-width: 160px;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n            display: -webkit-box;\n        }\n\n        .dlg-title {\n            -webkit-line-clamp: 4;\n            -webkit-box-orient: vertical;\n            display: -webkit-box;\n        }\n\n        .font-color-highlight {\n            color: #F15A4A;\n        }\n\n        .info-text {\n            font-size: 15px;\n        }\n\n        .info-text-s {\n            font-size: 14px;\n        }\n\n        .info-text-propagate {\n            font-size: 13px;\n        }\n\n        .font-color-info {\n            color: #999;\n        }\n\n        .info-value {\n            text-align: right;\n            margin-left: 5px;\n        }\n\n        .info-box {\n            padding-bottom: 13px;\n        }\n\n        .info-k-w-limit {\n            max-width: 40%;\n        }\n\n        .pd-lr {\n            padding: 0 16px;\n        }\n\n        .item-box {\n            height: 46px;\n            max-height: 46px;\n            min-height: 46px;\n            padding: 12px 16px;\n        }\n\n        .propagate-inner-container {\n            top: -6px;\n            flex-direction: row;\n            padding-top: 7px;\n            align-self: stretch;\n            margin-bottom: 4px;\n        }\n\n        .item-box-for-propagate {\n            height: 40px;\n            max-height: 40px;\n            min-height: 40px;\n            padding: 0 10px;\n            background-color: #F5F5F5;\n        }\n\n        .item-box-s-for-propagate {\n            height: 40px;\n            max-height: 40px;\n            min-height: 40px;\n            padding: 0 10px;\n            background-color: #F5F5F5;\n        }\n\n        .propagate-arrow {\n            position: absolute;\n            width: 16px;\n            height: 8px;\n            top: 0px;\n            left: 16px;\n        }\n\n        .propagate-icon {\n            margin-right: 8px;\n            height: 16px;\n            width: 16px;\n        }\n\n        .double-line-for-propagate {\n            height: 34px;\n        }\n\n        .item-btn {\n            background-color: #f7fcff;\n            margin-left: 5px;\n            border: 0.5px solid #108ee9;\n            border-radius: 1px;\n            padding: 2px 8px;\n            min-height: 24px;\n            min-width: 48px;\n        }\n\n        .item-btn-text {\n            font-size: 13px;\n            color: #108ee9;\n            max-width: 90px;\n        }\n\n        .top-pd {\n            height: 26px;\n        }\n\n        .red-point {\n            width: 8px;\n            height: 8px;\n            background-color: #FFFFFF;\n            border-radius: 4px;\n            border: 4px solid #F4333C;\n        }\n\n        .margin-lr {\n            margin: 0 16px;\n        }\n\n        .margin-l {\n            margin-left: 16px;\n        }\n\n        .protocol-box {\n            align-items: flex-start;\n            padding: 12px 16px 4px;\n        }\n\n        .protocol-link {\n            margin-left: 5px;\n        }\n\n        .btn-font {\n            font-size: 18px;\n        }\n\n        .btn-primary {\n            background-color: #108ee9;\n            border: 0;\n            border-radius: 2px;\n            color: #fff;\n            font-size: 18px;\n            height: 44px;\n            max-height: 44px;\n            min-height: 44px;\n            flex: 1.0;\n        }\n\n        .btn-primary:active {\n            background-color: #1284D6;\n            color: #fff;\n        }\n\n        .btn-primary:disabled {\n            background-color: #6DBAF3;\n            color: #C5E4FA;\n        }\n\n        .bottom-box {\n            justify-content: flex-end;\n            flex: 1;\n        }\n\n        .pay-btn-box {\n            flex-direction: column;\n            overflow: hidden;\n            padding: 12px 16px;\n            height: 68px;\n            max-height: 68px;\n            border-radius: 2px;\n            justify-content: flex-end;\n        }\n\n        .pay-text {\n            font-size: 18px;\n            color: #fff;\n        }\n\n        .btn-img {\n            width: 24px;\n            height: 24px;\n            margin-right: 8px;\n        }\n\n        .vi-finger-box {\n            justify-content: center;\n        }\n\n        .vi-finger {\n            height: 72px;\n            max-height: 72px;\n            min-height: 72px;\n        }\n\n        .total-cost {\n            font-size: 45px;\n            max-height: 65px;\n            padding-bottom: 8px;\n            font-family: AlipayNumber;\n        }\n\n        .total-cost-box {\n            height: 66px;\n            margin-bottom: 20px;\n            justify-content: center;\n            align-items: flex-end;\n        }\n\n        .total-cost-img {\n            height: 35px;\n            width: 17px;\n            max-width: 35px;\n            margin-bottom: 8px;\n        }\n\n        .shade {\n            background-color: #fff;\n            opacity: 0.90;\n            margin-top: -14px;\n            height: 14px;\n        }\n\n        .font-color-primary {\n            color: #333;\n        }\n\n        .amc-1px-line {\n            height: 0.5px;\n            background-color: #eee;\n        }\n\n        .amc-1px-title-line {\n            height: 0.5px;\n            background-color: #eee;\n        }\n\n        .amc-1px-sep-line {\n            height: 0.5px;\n            background-color: #eee;\n            margin-bottom: 12px;\n        }"}],"tag":"style"}],"tag":"head"},{"css":"amc-i-body","children":[{"css":"amc-1px-title-line","tag":"div","id":"iLine"},{},{"css":"amc-column-flex-1","children":[{},{"css":"amc-scroll pd-lr","children":[{},{"css":"top-pd","tag":"div"},{"css":"total-cost-box amc-hidden","children":[{"css":"total-cost-img","contentmode":"ScaleToFill","tag":"img","id":"totalCostImg"},{"css":"total-cost amc-text-center amc-ellipsis font-color-primary","tag":"label","id":"totalCost"}],"tag":"div","id":"totalCostBox"}],"tag":"div","id":"scrollableBox"},{},{"css":"shade","tag":"div"},{},{"css":"amc-v-box pd-lr amc-hidden","tag":"div","id":"fixedDetailBox"},{},{"css":"amc-v-box amc-hidden","tag":"div","id":"anchoredBox"},{},{"css":"amc-hidden protocol-box","children":[{"css":"info-text font-color-info agree-label amc-ellipsis-2-line","children":[{"tag":"text","text":"{{look}}"}],"tag":"label","id":"agree"},{"css":"amc-flex-1 amc-v-box","children":[{},{"css":"protocol-link amc-flex-1 info-text amc-theme-color amc-ellipsis-2-line amc-hidden","children":[{"tag":"text","text":"{{serve_protocol}}"}],"onclick":"showSingleProtocol()","tag":"label","id":"singleProtocol"},{},{"css":"protocol-link amc-flex-1 info-text amc-theme-color amc-ellipsis-2-line amc-hidden","children":[{"tag":"text","text":"{{serve_protocol}}"}],"onclick":"showMultiProtocol()","tag":"label","id":"multiProtocol"}],"tag":"div"}],"tag":"div","id":"protocolBox"},{"css":"bottom-box amc-v-box","children":[{},{"css":"pay-btn-box","children":[{"css":"btn-font btn-primary amc-align-center amc-justify-center","children":[{"css":"amc-loading-img amc-text-white-clolor amc-hidden","src":"indicatior","tag":"img","id":"smallLoading"},{"css":"btn-font btn-primary amc-align-center amc-justify-center","children":[{"css":"pay-text amc-flex-1 amc-text-center amc-ellipsis","children":[{"tag":"text","text":"{{pay_right_now}}"}],"tag":"label","id":"confirmLabel"}],"onclick":"onButtonClick();","tag":"div","id":"realBtn"}],"tag":"div","id":"btnWithSmallLoading"},{},{"css":"btn-primary btn-font amc-align-center amc-justify-center amc-hidden","children":[{"css":"btn-img","tag":"embed","id":"gifImg","type":"MQPPayGifView"},{"css":"pay-text amc-btn-ellpsis","children":[{"tag":"text","text":"{{paying}}"}],"tag":"label","id":"largeLoadingText"}],"tag":"div","id":"pseudoLoadingBtn"}],"tag":"div","id":"btnContainer"},{},{"css":"vi-finger vi-finger-box amc-hidden","children":[{"css":"vi-finger amc-flex-1","tag":"embed","id":"viPlugin","type":"VIPayPluginView"}],"tag":"div","id":"viPwdBox"},{"css":"amc-iphone-x-pd-b","tag":"div"}],"tag":"div"}],"tag":"div","id":"cashier"},{"css":"amc-dlg-box amc-v-box","children":[{"css":"amc-font-m amc-text-center amc-margin dlg-title","tag":"label","id":"dlgTxt"},{"css":"amc-v-box amc-justify-center amc-dlg-width","children":[{"css":"amc-adapt-line","tag":"div"},{"css":"amc-align-center amc-justify-center","children":[{"css":"btn-text amc-font-xxl amc-flex-1 amc-text-center amc-ellipsis-2-line","onclick":"getTag('dlg').close();","tag":"label","id":"btnLeft"},{"css":"btn-vertical-line","tag":"div"},{"css":"btn-text amc-font-xxl amc-flex-1 amc-text-center amc-ellipsis-2-line","tag":"label","id":"btnRight"}],"tag":"div"}],"tag":"div"}],"tag":"dialog","id":"dlg"}],"tag":"body","id":"body","onkeydown":"onKeyDown();","onload":"onload();"}],"tag":"html"},"publishVersion":"150924","name":"cashier-pay-confirm-flex","format":"JSON","tag":"QUICKPAY","time":"0065","tplId":"QUICKPAY@cashier-pay-confirm-flex","tplVersion":"5.4.1"}